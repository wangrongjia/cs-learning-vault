/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var tr=Object.create;var xt=Object.defineProperty;var ir=Object.getOwnPropertyDescriptor;var ar=Object.getOwnPropertyNames;var nr=Object.getPrototypeOf,rr=Object.prototype.hasOwnProperty;var sr=(i,t,e)=>t in i?xt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var st=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),or=(i,t)=>{for(var e in t)xt(i,e,{get:t[e],enumerable:!0})},ka=(i,t,e,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ar(t))!rr.call(i,s)&&s!==e&&xt(i,s,{get:()=>t[s],enumerable:!(a=ir(t,s))||a.enumerable});return i};var jt=(i,t,e)=>(e=i!=null?tr(nr(i)):{},ka(t||!i||!i.__esModule?xt(e,"default",{value:i,enumerable:!0}):e,i)),lr=i=>ka(xt({},"__esModule",{value:!0}),i);var _=(i,t,e)=>sr(i,typeof t!="symbol"?t+"":t,e);var za=st(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.toSeconds=le.end=le.parse=le.pattern=void 0;var lt="\\d+",Ci="".concat(lt,"(?:[\\.,]").concat(lt,")?"),cr="(".concat(lt,"Y)?(").concat(lt,"M)?(").concat(lt,"W)?(").concat(lt,"D)?"),mr="T(".concat(Ci,"H)?(").concat(Ci,"M)?(").concat(Ci,"S)?"),dr="P(?:".concat(cr,"(?:").concat(mr,")?)"),ur=["years","months","weeks","days","hours","minutes","seconds"],Ha=Object.freeze({years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0});le.pattern=new RegExp(dr);var gr=function(i){var t=i.replace(/,/g,".").match(le.pattern);if(!t)throw new RangeError("invalid duration: ".concat(i));var e=t.slice(1);if(e.filter(function(a){return a!=null}).length===0)throw new RangeError("invalid duration: ".concat(i));if(e.filter(function(a){return/\./.test(a||"")}).length>1)throw new RangeError("only the smallest unit can be fractional");return e.reduce(function(a,s,n){return a[ur[n]]=parseFloat(s||"0")||0,a},{})};le.parse=gr;var hr=function(i,t){t===void 0&&(t=new Date);var e=Object.assign({},Ha,i),a=t.getTime(),s=new Date(a);s.setFullYear(s.getFullYear()+e.years),s.setMonth(s.getMonth()+e.months),s.setDate(s.getDate()+e.days);var n=e.hours*3600*1e3,r=e.minutes*60*1e3;return s.setMilliseconds(s.getMilliseconds()+e.seconds*1e3+n+r),s.setDate(s.getDate()+e.weeks*7),s};le.end=hr;var fr=function(i,t){t===void 0&&(t=new Date);var e=Object.assign({},Ha,i),a=t.getTime(),s=new Date(a),n=(0,le.end)(e,s),r=t.getTimezoneOffset(),o=n.getTimezoneOffset(),p=(r-o)*60,c=(n.getTime()-s.getTime())/1e3;return c+p};le.toSeconds=fr;le.default={end:le.end,toSeconds:le.toSeconds,pattern:le.pattern,parse:le.parse}});var ji=st((Hi,zi)=>{(function(i,t){typeof Hi=="object"&&typeof zi!="undefined"?zi.exports=t():typeof define=="function"&&define.amd?define(t):(i=typeof globalThis!="undefined"?globalThis:i||self,i.DOMPurify=t())})(Hi,function(){"use strict";function i(v){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},i(v)}function t(v,b){return t=Object.setPrototypeOf||function(D,Z){return D.__proto__=Z,D},t(v,b)}function e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}function a(v,b,k){return e()?a=Reflect.construct:a=function(Z,Ee,ve){var Le=[null];Le.push.apply(Le,Ee);var Ge=Function.bind.apply(Z,Le),ft=new Ge;return ve&&t(ft,ve.prototype),ft},a.apply(null,arguments)}function s(v){return n(v)||r(v)||o(v)||c()}function n(v){if(Array.isArray(v))return p(v)}function r(v){if(typeof Symbol!="undefined"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function o(v,b){if(v){if(typeof v=="string")return p(v,b);var k=Object.prototype.toString.call(v).slice(8,-1);if(k==="Object"&&v.constructor&&(k=v.constructor.name),k==="Map"||k==="Set")return Array.from(v);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return p(v,b)}}function p(v,b){(b==null||b>v.length)&&(b=v.length);for(var k=0,D=new Array(b);k<b;k++)D[k]=v[k];return D}function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=Object.hasOwnProperty,h=Object.setPrototypeOf,C=Object.isFrozen,A=Object.getPrototypeOf,x=Object.getOwnPropertyDescriptor,T=Object.freeze,N=Object.seal,j=Object.create,U=typeof Reflect!="undefined"&&Reflect,z=U.apply,y=U.construct;z||(z=function(b,k,D){return b.apply(k,D)}),T||(T=function(b){return b}),N||(N=function(b){return b}),y||(y=function(b,k){return a(b,s(k))});var q=$(Array.prototype.forEach),S=$(Array.prototype.pop),L=$(Array.prototype.push),Y=$(String.prototype.toLowerCase),Q=$(String.prototype.toString),te=$(String.prototype.match),V=$(String.prototype.replace),de=$(String.prototype.indexOf),be=$(String.prototype.trim),F=$(RegExp.prototype.test),M=ue(TypeError);function $(v){return function(b){for(var k=arguments.length,D=new Array(k>1?k-1:0),Z=1;Z<k;Z++)D[Z-1]=arguments[Z];return z(v,b,D)}}function ue(v){return function(){for(var b=arguments.length,k=new Array(b),D=0;D<b;D++)k[D]=arguments[D];return y(v,k)}}function E(v,b,k){var D;k=(D=k)!==null&&D!==void 0?D:Y,h&&h(v,null);for(var Z=b.length;Z--;){var Ee=b[Z];if(typeof Ee=="string"){var ve=k(Ee);ve!==Ee&&(C(b)||(b[Z]=ve),Ee=ve)}v[Ee]=!0}return v}function W(v){var b=j(null),k;for(k in v)z(d,v,[k])===!0&&(b[k]=v[k]);return b}function P(v,b){for(;v!==null;){var k=x(v,b);if(k){if(k.get)return $(k.get);if(typeof k.value=="function")return $(k.value)}v=A(v)}function D(Z){return console.warn("fallback value for",Z),null}return D}var re=T(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ye=T(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),xe=T(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Re=T(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fe=T(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Te=T(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),we=T(["#text"]),ge=T(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ke=T(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_e=T(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),X=T(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),se=N(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ce=N(/<%[\w\W]*|[\w\W]*%>/gm),J=N(/\${[\w\W]*}/gm),B=N(/^data-[\-\w.\u00B7-\uFFFF]/),Ne=N(/^aria-[\-\w]+$/),R=N(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ue=N(/^(?:\w+script|data):/i),ze=N(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Lt=N(/^html$/i),ni=N(/^[a-z][.\w]*(-[.\w]+)+$/i),Dn=function(){return typeof window=="undefined"?null:window},Pn=function(b,k){if(i(b)!=="object"||typeof b.createPolicy!="function")return null;var D=null,Z="data-tt-policy-suffix";k.currentScript&&k.currentScript.hasAttribute(Z)&&(D=k.currentScript.getAttribute(Z));var Ee="dompurify"+(D?"#"+D:"");try{return b.createPolicy(Ee,{createHTML:function(Le){return Le},createScriptURL:function(Le){return Le}})}catch(ve){return console.warn("TrustedTypes policy "+Ee+" could not be created."),null}};function ia(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dn(),b=function(l){return ia(l)};if(b.version="2.5.6",b.removed=[],!v||!v.document||v.document.nodeType!==9)return b.isSupported=!1,b;var k=v.document,D=v.document,Z=v.DocumentFragment,Ee=v.HTMLTemplateElement,ve=v.Node,Le=v.Element,Ge=v.NodeFilter,ft=v.NamedNodeMap,Ln=ft===void 0?v.NamedNodeMap||v.MozNamedAttrMap:ft,In=v.HTMLFormElement,Fn=v.DOMParser,It=v.trustedTypes,Ft=Le.prototype,Mn=P(Ft,"cloneNode"),On=P(Ft,"nextSibling"),Un=P(Ft,"childNodes"),ri=P(Ft,"parentNode");if(typeof Ee=="function"){var si=D.createElement("template");si.content&&si.content.ownerDocument&&(D=si.content.ownerDocument)}var De=Pn(It,k),oi=De?De.createHTML(""):"",Mt=D,li=Mt.implementation,Vn=Mt.createNodeIterator,Bn=Mt.createDocumentFragment,Hn=Mt.getElementsByTagName,zn=k.importNode,aa={};try{aa=W(D).documentMode?D.documentMode:{}}catch(w){}var Ie={};b.isSupported=typeof ri=="function"&&li&&li.createHTMLDocument!==void 0&&aa!==9;var pi=se,ci=Ce,mi=J,jn=B,$n=Ne,qn=Ue,na=ze,Wn=ni,di=R,ie=null,ra=E({},[].concat(s(re),s(ye),s(xe),s(fe),s(we))),ae=null,sa=E({},[].concat(s(ge),s(ke),s(_e),s(X))),K=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),vt=null,ui=null,oa=!0,gi=!0,la=!1,pa=!0,et=!1,hi=!0,Ye=!1,fi=!1,vi=!1,tt=!1,Ot=!1,Ut=!1,ca=!0,ma=!1,Gn="user-content-",bi=!0,bt=!1,it={},at=null,da=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ua=null,ga=E({},["audio","video","img","source","image","track"]),yi=null,ha=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Vt="http://www.w3.org/1998/Math/MathML",Bt="http://www.w3.org/2000/svg",Ve="http://www.w3.org/1999/xhtml",nt=Ve,xi=!1,Ti=null,Yn=E({},[Vt,Bt,Ve],Q),Xe,Xn=["application/xhtml+xml","text/html"],Kn="text/html",ne,rt=null,Jn=D.createElement("form"),fa=function(l){return l instanceof RegExp||l instanceof Function},wi=function(l){rt&&rt===l||((!l||i(l)!=="object")&&(l={}),l=W(l),Xe=Xn.indexOf(l.PARSER_MEDIA_TYPE)===-1?Xe=Kn:Xe=l.PARSER_MEDIA_TYPE,ne=Xe==="application/xhtml+xml"?Q:Y,ie="ALLOWED_TAGS"in l?E({},l.ALLOWED_TAGS,ne):ra,ae="ALLOWED_ATTR"in l?E({},l.ALLOWED_ATTR,ne):sa,Ti="ALLOWED_NAMESPACES"in l?E({},l.ALLOWED_NAMESPACES,Q):Yn,yi="ADD_URI_SAFE_ATTR"in l?E(W(ha),l.ADD_URI_SAFE_ATTR,ne):ha,ua="ADD_DATA_URI_TAGS"in l?E(W(ga),l.ADD_DATA_URI_TAGS,ne):ga,at="FORBID_CONTENTS"in l?E({},l.FORBID_CONTENTS,ne):da,vt="FORBID_TAGS"in l?E({},l.FORBID_TAGS,ne):{},ui="FORBID_ATTR"in l?E({},l.FORBID_ATTR,ne):{},it="USE_PROFILES"in l?l.USE_PROFILES:!1,oa=l.ALLOW_ARIA_ATTR!==!1,gi=l.ALLOW_DATA_ATTR!==!1,la=l.ALLOW_UNKNOWN_PROTOCOLS||!1,pa=l.ALLOW_SELF_CLOSE_IN_ATTR!==!1,et=l.SAFE_FOR_TEMPLATES||!1,hi=l.SAFE_FOR_XML!==!1,Ye=l.WHOLE_DOCUMENT||!1,tt=l.RETURN_DOM||!1,Ot=l.RETURN_DOM_FRAGMENT||!1,Ut=l.RETURN_TRUSTED_TYPE||!1,vi=l.FORCE_BODY||!1,ca=l.SANITIZE_DOM!==!1,ma=l.SANITIZE_NAMED_PROPS||!1,bi=l.KEEP_CONTENT!==!1,bt=l.IN_PLACE||!1,di=l.ALLOWED_URI_REGEXP||di,nt=l.NAMESPACE||Ve,K=l.CUSTOM_ELEMENT_HANDLING||{},l.CUSTOM_ELEMENT_HANDLING&&fa(l.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=l.CUSTOM_ELEMENT_HANDLING.tagNameCheck),l.CUSTOM_ELEMENT_HANDLING&&fa(l.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=l.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),l.CUSTOM_ELEMENT_HANDLING&&typeof l.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=l.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),et&&(gi=!1),Ot&&(tt=!0),it&&(ie=E({},s(we)),ae=[],it.html===!0&&(E(ie,re),E(ae,ge)),it.svg===!0&&(E(ie,ye),E(ae,ke),E(ae,X)),it.svgFilters===!0&&(E(ie,xe),E(ae,ke),E(ae,X)),it.mathMl===!0&&(E(ie,fe),E(ae,_e),E(ae,X))),l.ADD_TAGS&&(ie===ra&&(ie=W(ie)),E(ie,l.ADD_TAGS,ne)),l.ADD_ATTR&&(ae===sa&&(ae=W(ae)),E(ae,l.ADD_ATTR,ne)),l.ADD_URI_SAFE_ATTR&&E(yi,l.ADD_URI_SAFE_ATTR,ne),l.FORBID_CONTENTS&&(at===da&&(at=W(at)),E(at,l.FORBID_CONTENTS,ne)),bi&&(ie["#text"]=!0),Ye&&E(ie,["html","head","body"]),ie.table&&(E(ie,["tbody"]),delete vt.tbody),T&&T(l),rt=l)},va=E({},["mi","mo","mn","ms","mtext"]),ba=E({},["foreignobject","annotation-xml"]),Zn=E({},["title","style","font","a","script"]),Ht=E({},ye);E(Ht,xe),E(Ht,Re);var Ni=E({},fe);E(Ni,Te);var Qn=function(l){var u=ri(l);(!u||!u.tagName)&&(u={namespaceURI:nt,tagName:"template"});var f=Y(l.tagName),I=Y(u.tagName);return Ti[l.namespaceURI]?l.namespaceURI===Bt?u.namespaceURI===Ve?f==="svg":u.namespaceURI===Vt?f==="svg"&&(I==="annotation-xml"||va[I]):!!Ht[f]:l.namespaceURI===Vt?u.namespaceURI===Ve?f==="math":u.namespaceURI===Bt?f==="math"&&ba[I]:!!Ni[f]:l.namespaceURI===Ve?u.namespaceURI===Bt&&!ba[I]||u.namespaceURI===Vt&&!va[I]?!1:!Ni[f]&&(Zn[f]||!Ht[f]):!!(Xe==="application/xhtml+xml"&&Ti[l.namespaceURI]):!1},Ae=function(l){L(b.removed,{element:l});try{l.parentNode.removeChild(l)}catch(u){try{l.outerHTML=oi}catch(f){l.remove()}}},zt=function(l,u){try{L(b.removed,{attribute:u.getAttributeNode(l),from:u})}catch(f){L(b.removed,{attribute:null,from:u})}if(u.removeAttribute(l),l==="is"&&!ae[l])if(tt||Ot)try{Ae(u)}catch(f){}else try{u.setAttribute(l,"")}catch(f){}},ya=function(l){var u,f;if(vi)l="<remove></remove>"+l;else{var I=te(l,/^[\r\n\t ]+/);f=I&&I[0]}Xe==="application/xhtml+xml"&&nt===Ve&&(l='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+l+"</body></html>");var he=De?De.createHTML(l):l;if(nt===Ve)try{u=new Fn().parseFromString(he,Xe)}catch(oe){}if(!u||!u.documentElement){u=li.createDocument(nt,"template",null);try{u.documentElement.innerHTML=xi?oi:he}catch(oe){}}var pe=u.body||u.documentElement;return l&&f&&pe.insertBefore(D.createTextNode(f),pe.childNodes[0]||null),nt===Ve?Hn.call(u,Ye?"html":"body")[0]:Ye?u.documentElement:pe},xa=function(l){return Vn.call(l.ownerDocument||l,l,Ge.SHOW_ELEMENT|Ge.SHOW_COMMENT|Ge.SHOW_TEXT|Ge.SHOW_PROCESSING_INSTRUCTION|Ge.SHOW_CDATA_SECTION,null,!1)},Ta=function(l){return l instanceof In&&(typeof l.nodeName!="string"||typeof l.textContent!="string"||typeof l.removeChild!="function"||!(l.attributes instanceof Ln)||typeof l.removeAttribute!="function"||typeof l.setAttribute!="function"||typeof l.namespaceURI!="string"||typeof l.insertBefore!="function"||typeof l.hasChildNodes!="function")},yt=function(l){return i(ve)==="object"?l instanceof ve:l&&i(l)==="object"&&typeof l.nodeType=="number"&&typeof l.nodeName=="string"},Be=function(l,u,f){Ie[l]&&q(Ie[l],function(I){I.call(b,u,f,rt)})},wa=function(l){var u;if(Be("beforeSanitizeElements",l,null),Ta(l)||F(/[\u0080-\uFFFF]/,l.nodeName))return Ae(l),!0;var f=ne(l.nodeName);if(Be("uponSanitizeElement",l,{tagName:f,allowedTags:ie}),l.hasChildNodes()&&!yt(l.firstElementChild)&&(!yt(l.content)||!yt(l.content.firstElementChild))&&F(/<[/\w]/g,l.innerHTML)&&F(/<[/\w]/g,l.textContent)||f==="select"&&F(/<template/i,l.innerHTML)||l.nodeType===7||hi&&l.nodeType===8&&F(/<[/\w]/g,l.data))return Ae(l),!0;if(!ie[f]||vt[f]){if(!vt[f]&&Ea(f)&&(K.tagNameCheck instanceof RegExp&&F(K.tagNameCheck,f)||K.tagNameCheck instanceof Function&&K.tagNameCheck(f)))return!1;if(bi&&!at[f]){var I=ri(l)||l.parentNode,he=Un(l)||l.childNodes;if(he&&I)for(var pe=he.length,oe=pe-1;oe>=0;--oe){var Ke=Mn(he[oe],!0);Ke.__removalCount=(l.__removalCount||0)+1,I.insertBefore(Ke,On(l))}}return Ae(l),!0}return l instanceof Le&&!Qn(l)||(f==="noscript"||f==="noembed"||f==="noframes")&&F(/<\/no(script|embed|frames)/i,l.innerHTML)?(Ae(l),!0):(et&&l.nodeType===3&&(u=l.textContent,u=V(u,pi," "),u=V(u,ci," "),u=V(u,mi," "),l.textContent!==u&&(L(b.removed,{element:l.cloneNode()}),l.textContent=u)),Be("afterSanitizeElements",l,null),!1)},Na=function(l,u,f){if(ca&&(u==="id"||u==="name")&&(f in D||f in Jn))return!1;if(!(gi&&!ui[u]&&F(jn,u))){if(!(oa&&F($n,u))){if(!ae[u]||ui[u]){if(!(Ea(l)&&(K.tagNameCheck instanceof RegExp&&F(K.tagNameCheck,l)||K.tagNameCheck instanceof Function&&K.tagNameCheck(l))&&(K.attributeNameCheck instanceof RegExp&&F(K.attributeNameCheck,u)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(u))||u==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&F(K.tagNameCheck,f)||K.tagNameCheck instanceof Function&&K.tagNameCheck(f))))return!1}else if(!yi[u]){if(!F(di,V(f,na,""))){if(!((u==="src"||u==="xlink:href"||u==="href")&&l!=="script"&&de(f,"data:")===0&&ua[l])){if(!(la&&!F(qn,V(f,na,"")))){if(f)return!1}}}}}}return!0},Ea=function(l){return l!=="annotation-xml"&&te(l,Wn)},Aa=function(l){var u,f,I,he;Be("beforeSanitizeAttributes",l,null);var pe=l.attributes;if(pe){var oe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae};for(he=pe.length;he--;){u=pe[he];var Ke=u,ee=Ke.name,Ei=Ke.namespaceURI;if(f=ee==="value"?u.value:be(u.value),I=ne(ee),oe.attrName=I,oe.attrValue=f,oe.keepAttr=!0,oe.forceKeepAttr=void 0,Be("uponSanitizeAttribute",l,oe),f=oe.attrValue,hi&&F(/((--!?|])>)|<\/(style|title)/i,f)){zt(ee,l);continue}if(!oe.forceKeepAttr&&(zt(ee,l),!!oe.keepAttr)){if(!pa&&F(/\/>/i,f)){zt(ee,l);continue}et&&(f=V(f,pi," "),f=V(f,ci," "),f=V(f,mi," "));var Sa=ne(l.nodeName);if(Na(Sa,I,f)){if(ma&&(I==="id"||I==="name")&&(zt(ee,l),f=Gn+f),De&&i(It)==="object"&&typeof It.getAttributeType=="function"&&!Ei)switch(It.getAttributeType(Sa,I)){case"TrustedHTML":{f=De.createHTML(f);break}case"TrustedScriptURL":{f=De.createScriptURL(f);break}}try{Ei?l.setAttributeNS(Ei,ee,f):l.setAttribute(ee,f),Ta(l)?Ae(l):S(b.removed)}catch(ms){}}}}Be("afterSanitizeAttributes",l,null)}},er=function w(l){var u,f=xa(l);for(Be("beforeSanitizeShadowDOM",l,null);u=f.nextNode();)Be("uponSanitizeShadowNode",u,null),!wa(u)&&(u.content instanceof Z&&w(u.content),Aa(u));Be("afterSanitizeShadowDOM",l,null)};return b.sanitize=function(w){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u,f,I,he,pe;if(xi=!w,xi&&(w="<!-->"),typeof w!="string"&&!yt(w))if(typeof w.toString=="function"){if(w=w.toString(),typeof w!="string")throw M("dirty is not a string, aborting")}else throw M("toString is not a function");if(!b.isSupported){if(i(v.toStaticHTML)==="object"||typeof v.toStaticHTML=="function"){if(typeof w=="string")return v.toStaticHTML(w);if(yt(w))return v.toStaticHTML(w.outerHTML)}return w}if(fi||wi(l),b.removed=[],typeof w=="string"&&(bt=!1),bt){if(w.nodeName){var oe=ne(w.nodeName);if(!ie[oe]||vt[oe])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(w instanceof ve)u=ya("<!---->"),f=u.ownerDocument.importNode(w,!0),f.nodeType===1&&f.nodeName==="BODY"||f.nodeName==="HTML"?u=f:u.appendChild(f);else{if(!tt&&!et&&!Ye&&w.indexOf("<")===-1)return De&&Ut?De.createHTML(w):w;if(u=ya(w),!u)return tt?null:Ut?oi:""}u&&vi&&Ae(u.firstChild);for(var Ke=xa(bt?w:u);I=Ke.nextNode();)I.nodeType===3&&I===he||wa(I)||(I.content instanceof Z&&er(I.content),Aa(I),he=I);if(he=null,bt)return w;if(tt){if(Ot)for(pe=Bn.call(u.ownerDocument);u.firstChild;)pe.appendChild(u.firstChild);else pe=u;return(ae.shadowroot||ae.shadowrootmod)&&(pe=zn.call(k,pe,!0)),pe}var ee=Ye?u.outerHTML:u.innerHTML;return Ye&&ie["!doctype"]&&u.ownerDocument&&u.ownerDocument.doctype&&u.ownerDocument.doctype.name&&F(Lt,u.ownerDocument.doctype.name)&&(ee="<!DOCTYPE "+u.ownerDocument.doctype.name+`>
`+ee),et&&(ee=V(ee,pi," "),ee=V(ee,ci," "),ee=V(ee,mi," ")),De&&Ut?De.createHTML(ee):ee},b.setConfig=function(w){wi(w),fi=!0},b.clearConfig=function(){rt=null,fi=!1},b.isValidAttribute=function(w,l,u){rt||wi({});var f=ne(w),I=ne(l);return Na(f,I,u)},b.addHook=function(w,l){typeof l=="function"&&(Ie[w]=Ie[w]||[],L(Ie[w],l))},b.removeHook=function(w){if(Ie[w])return S(Ie[w])},b.removeHooks=function(w){Ie[w]&&(Ie[w]=[])},b.removeAllHooks=function(){Ie={}},b}var Rn=ia();return Rn})});var $i=st((So,un)=>{un.exports=window.DOMPurify||(window.DOMPurify=ji().default||ji())});var vn=st((Go,Yi)=>{function fn(i,t){if(t&&t.documentElement)i=t,t=arguments[2];else if(!i||!i.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=i,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(e){return e.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._allowedVideoRegex=t.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let e=function(a){if(a.nodeType==a.TEXT_NODE)return`${a.nodeName} ("${a.textContent}")`;let s=Array.from(a.attributes||[],function(n){return`${n.name}="${n.value}"`}).join(" ");return`<${a.localName} ${s}>`};this.log=function(){if(typeof console!="undefined"){let s=Array.from(arguments,n=>n&&n.nodeType==this.ELEMENT_NODE?e(n):n);s.unshift("Reader: (Readability)"),console.log.apply(console,s)}else if(typeof dump!="undefined"){var a=Array.prototype.map.call(arguments,function(s){return s&&s.nodeName?e(s):s}).join(" ");dump("Reader: (Readability) "+a+`
`)}}}else this.log=function(){}}fn.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(i){this._fixRelativeUris(i),this._simplifyNestedElements(i),this._keepClasses||this._cleanClasses(i)},_removeNodes:function(i,t){if(this._docJSDOMParser&&i._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var e=i.length-1;e>=0;e--){var a=i[e],s=a.parentNode;s&&(!t||t.call(this,a,e,i))&&s.removeChild(a)}},_replaceNodeTags:function(i,t){if(this._docJSDOMParser&&i._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(let e of i)this._setNodeTag(e,t)},_forEachNode:function(i,t){Array.prototype.forEach.call(i,t,this)},_findNode:function(i,t){return Array.prototype.find.call(i,t,this)},_someNode:function(i,t){return Array.prototype.some.call(i,t,this)},_everyNode:function(i,t){return Array.prototype.every.call(i,t,this)},_concatNodeLists:function(){var i=Array.prototype.slice,t=i.call(arguments),e=t.map(function(a){return i.call(a)});return Array.prototype.concat.apply([],e)},_getAllNodesWithTag:function(i,t){return i.querySelectorAll?i.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(e){var a=i.getElementsByTagName(e);return Array.isArray(a)?a:Array.from(a)}))},_cleanClasses:function(i){var t=this._classesToPreserve,e=(i.getAttribute("class")||"").split(/\s+/).filter(function(a){return t.indexOf(a)!=-1}).join(" ");for(e?i.setAttribute("class",e):i.removeAttribute("class"),i=i.firstElementChild;i;i=i.nextElementSibling)this._cleanClasses(i)},_fixRelativeUris:function(i){var t=this._doc.baseURI,e=this._doc.documentURI;function a(r){if(t==e&&r.charAt(0)=="#")return r;try{return new URL(r,t).href}catch(o){}return r}var s=this._getAllNodesWithTag(i,["a"]);this._forEachNode(s,function(r){var o=r.getAttribute("href");if(o)if(o.indexOf("javascript:")===0)if(r.childNodes.length===1&&r.childNodes[0].nodeType===this.TEXT_NODE){var p=this._doc.createTextNode(r.textContent);r.parentNode.replaceChild(p,r)}else{for(var c=this._doc.createElement("span");r.firstChild;)c.appendChild(r.firstChild);r.parentNode.replaceChild(c,r)}else r.setAttribute("href",a(o))});var n=this._getAllNodesWithTag(i,["img","picture","figure","video","audio","source"]);this._forEachNode(n,function(r){var o=r.getAttribute("src"),p=r.getAttribute("poster"),c=r.getAttribute("srcset");if(o&&r.setAttribute("src",a(o)),p&&r.setAttribute("poster",a(p)),c){var d=c.replace(this.REGEXPS.srcsetUrl,function(h,C,A,x){return a(C)+(A||"")+x});r.setAttribute("srcset",d)}})},_simplifyNestedElements:function(i){for(var t=i;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&!(t.id&&t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}else if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var e=t.children[0],a=0;a<t.attributes.length;a++)e.setAttribute(t.attributes[a].name,t.attributes[a].value);t.parentNode.replaceChild(e,t),t=e;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var i=this._doc,t="",e="";try{t=e=i.title.trim(),typeof t!="string"&&(t=e=this._getInnerText(i.getElementsByTagName("title")[0]))}catch(d){}var a=!1;function s(d){return d.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))a=/ [\\\/>»] /.test(t),t=e.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),s(t)<3&&(t=e.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(t.indexOf(": ")!==-1){var n=this._concatNodeLists(i.getElementsByTagName("h1"),i.getElementsByTagName("h2")),r=t.trim(),o=this._someNode(n,function(d){return d.textContent.trim()===r});o||(t=e.substring(e.lastIndexOf(":")+1),s(t)<3?t=e.substring(e.indexOf(":")+1):s(e.substr(0,e.indexOf(":")))>5&&(t=e))}else if(t.length>150||t.length<15){var p=i.getElementsByTagName("h1");p.length===1&&(t=this._getInnerText(p[0]))}t=t.trim().replace(this.REGEXPS.normalize," ");var c=s(t);return c<=4&&(!a||c!=s(e.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=e),t},_prepDocument:function(){var i=this._doc;this._removeNodes(this._getAllNodesWithTag(i,["style"])),i.body&&this._replaceBrs(i.body),this._replaceNodeTags(this._getAllNodesWithTag(i,["font"]),"SPAN")},_nextNode:function(i){for(var t=i;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(i){this._forEachNode(this._getAllNodesWithTag(i,["br"]),function(t){for(var e=t.nextSibling,a=!1;(e=this._nextNode(e))&&e.tagName=="BR";){a=!0;var s=e.nextSibling;e.parentNode.removeChild(e),e=s}if(a){var n=this._doc.createElement("p");for(t.parentNode.replaceChild(n,t),e=n.nextSibling;e;){if(e.tagName=="BR"){var r=this._nextNode(e.nextSibling);if(r&&r.tagName=="BR")break}if(!this._isPhrasingContent(e))break;var o=e.nextSibling;n.appendChild(e),e=o}for(;n.lastChild&&this._isWhitespace(n.lastChild);)n.removeChild(n.lastChild);n.parentNode.tagName==="P"&&this._setNodeTag(n.parentNode,"DIV")}})},_setNodeTag:function(i,t){if(this.log("_setNodeTag",i,t),this._docJSDOMParser)return i.localName=t.toLowerCase(),i.tagName=t.toUpperCase(),i;for(var e=i.ownerDocument.createElement(t);i.firstChild;)e.appendChild(i.firstChild);i.parentNode.replaceChild(e,i),i.readability&&(e.readability=i.readability);for(var a=0;a<i.attributes.length;a++)try{e.setAttribute(i.attributes[a].name,i.attributes[a].value)}catch(s){}return e},_prepArticle:function(i){this._cleanStyles(i),this._markDataTables(i),this._fixLazyImages(i),this._cleanConditionally(i,"form"),this._cleanConditionally(i,"fieldset"),this._clean(i,"object"),this._clean(i,"embed"),this._clean(i,"footer"),this._clean(i,"link"),this._clean(i,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(i.children,function(e){this._cleanMatchedNodes(e,function(a,s){return this.REGEXPS.shareElements.test(s)&&a.textContent.length<t})}),this._clean(i,"iframe"),this._clean(i,"input"),this._clean(i,"textarea"),this._clean(i,"select"),this._clean(i,"button"),this._cleanHeaders(i),this._cleanConditionally(i,"table"),this._cleanConditionally(i,"ul"),this._cleanConditionally(i,"div"),this._replaceNodeTags(this._getAllNodesWithTag(i,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(i,["p"]),function(e){var a=e.getElementsByTagName("img").length,s=e.getElementsByTagName("embed").length,n=e.getElementsByTagName("object").length,r=e.getElementsByTagName("iframe").length,o=a+s+n+r;return o===0&&!this._getInnerText(e,!1)}),this._forEachNode(this._getAllNodesWithTag(i,["br"]),function(e){var a=this._nextNode(e.nextSibling);a&&a.tagName=="P"&&e.parentNode.removeChild(e)}),this._forEachNode(this._getAllNodesWithTag(i,["table"]),function(e){var a=this._hasSingleTagInsideElement(e,"TBODY")?e.firstElementChild:e;if(this._hasSingleTagInsideElement(a,"TR")){var s=a.firstElementChild;if(this._hasSingleTagInsideElement(s,"TD")){var n=s.firstElementChild;n=this._setNodeTag(n,this._everyNode(n.childNodes,this._isPhrasingContent)?"P":"DIV"),e.parentNode.replaceChild(n,e)}}})},_initializeNode:function(i){switch(i.readability={contentScore:0},i.tagName){case"DIV":i.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":i.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":i.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":i.readability.contentScore-=5;break}i.readability.contentScore+=this._getClassWeight(i)},_removeAndGetNext:function(i){var t=this._getNextNode(i,!0);return i.parentNode.removeChild(i),t},_getNextNode:function(i,t){if(!t&&i.firstElementChild)return i.firstElementChild;if(i.nextElementSibling)return i.nextElementSibling;do i=i.parentNode;while(i&&!i.nextElementSibling);return i&&i.nextElementSibling},_textSimilarity:function(i,t){var e=i.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),a=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!e.length||!a.length)return 0;var s=a.filter(r=>!e.includes(r)),n=s.join(" ").length/a.join(" ").length;return 1-n},_checkByline:function(i,t){if(this._articleByline)return!1;if(i.getAttribute!==void 0)var e=i.getAttribute("rel"),a=i.getAttribute("itemprop");return(e==="author"||a&&a.indexOf("author")!==-1||this.REGEXPS.byline.test(t))&&this._isValidByline(i.textContent)?(this._articleByline=i.textContent.trim(),!0):!1},_getNodeAncestors:function(i,t){t=t||0;for(var e=0,a=[];i.parentNode&&(a.push(i.parentNode),!(t&&++e===t));)i=i.parentNode;return a},_grabArticle:function(i){this.log("**** grabArticle ****");var t=this._doc,e=i!==null;if(i=i||this._doc.body,!i)return this.log("No body found in document. Abort."),null;for(var a=i.innerHTML;;){this.log("Starting grabArticle loop");var s=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),n=[],r=this._doc.documentElement;let _e=!0;for(;r;){r.tagName==="HTML"&&(this._articleLang=r.getAttribute("lang"));var o=r.className+" "+r.id;if(!this._isProbablyVisible(r)){this.log("Removing hidden node - "+o),r=this._removeAndGetNext(r);continue}if(r.getAttribute("aria-modal")=="true"&&r.getAttribute("role")=="dialog"){r=this._removeAndGetNext(r);continue}if(this._checkByline(r,o)){r=this._removeAndGetNext(r);continue}if(_e&&this._headerDuplicatesTitle(r)){this.log("Removing header: ",r.textContent.trim(),this._articleTitle.trim()),_e=!1,r=this._removeAndGetNext(r);continue}if(s){if(this.REGEXPS.unlikelyCandidates.test(o)&&!this.REGEXPS.okMaybeItsACandidate.test(o)&&!this._hasAncestorTag(r,"table")&&!this._hasAncestorTag(r,"code")&&r.tagName!=="BODY"&&r.tagName!=="A"){this.log("Removing unlikely candidate - "+o),r=this._removeAndGetNext(r);continue}if(this.UNLIKELY_ROLES.includes(r.getAttribute("role"))){this.log("Removing content with role "+r.getAttribute("role")+" - "+o),r=this._removeAndGetNext(r);continue}}if((r.tagName==="DIV"||r.tagName==="SECTION"||r.tagName==="HEADER"||r.tagName==="H1"||r.tagName==="H2"||r.tagName==="H3"||r.tagName==="H4"||r.tagName==="H5"||r.tagName==="H6")&&this._isElementWithoutContent(r)){r=this._removeAndGetNext(r);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(r.tagName)!==-1&&n.push(r),r.tagName==="DIV"){for(var p=null,c=r.firstChild;c;){var d=c.nextSibling;if(this._isPhrasingContent(c))p!==null?p.appendChild(c):this._isWhitespace(c)||(p=t.createElement("p"),r.replaceChild(p,c),p.appendChild(c));else if(p!==null){for(;p.lastChild&&this._isWhitespace(p.lastChild);)p.removeChild(p.lastChild);p=null}c=d}if(this._hasSingleTagInsideElement(r,"P")&&this._getLinkDensity(r)<.25){var h=r.children[0];r.parentNode.replaceChild(h,r),r=h,n.push(r)}else this._hasChildBlockElement(r)||(r=this._setNodeTag(r,"P"),n.push(r))}r=this._getNextNode(r)}var C=[];this._forEachNode(n,function(X){if(!(!X.parentNode||typeof X.parentNode.tagName=="undefined")){var se=this._getInnerText(X);if(!(se.length<25)){var Ce=this._getNodeAncestors(X,5);if(Ce.length!==0){var J=0;J+=1,J+=se.split(this.REGEXPS.commas).length,J+=Math.min(Math.floor(se.length/100),3),this._forEachNode(Ce,function(B,Ne){if(!(!B.tagName||!B.parentNode||typeof B.parentNode.tagName=="undefined")){if(typeof B.readability=="undefined"&&(this._initializeNode(B),C.push(B)),Ne===0)var R=1;else Ne===1?R=2:R=Ne*3;B.readability.contentScore+=J/R}})}}}});for(var A=[],x=0,T=C.length;x<T;x+=1){var N=C[x],j=N.readability.contentScore*(1-this._getLinkDensity(N));N.readability.contentScore=j,this.log("Candidate:",N,"with score "+j);for(var U=0;U<this._nbTopCandidates;U++){var z=A[U];if(!z||j>z.readability.contentScore){A.splice(U,0,N),A.length>this._nbTopCandidates&&A.pop();break}}}var y=A[0]||null,q=!1,S;if(y===null||y.tagName==="BODY"){for(y=t.createElement("DIV"),q=!0;i.firstChild;)this.log("Moving child out:",i.firstChild),y.appendChild(i.firstChild);i.appendChild(y),this._initializeNode(y)}else if(y){for(var L=[],Y=1;Y<A.length;Y++)A[Y].readability.contentScore/y.readability.contentScore>=.75&&L.push(this._getNodeAncestors(A[Y]));var Q=3;if(L.length>=Q)for(S=y.parentNode;S.tagName!=="BODY";){for(var te=0,V=0;V<L.length&&te<Q;V++)te+=Number(L[V].includes(S));if(te>=Q){y=S;break}S=S.parentNode}y.readability||this._initializeNode(y),S=y.parentNode;for(var de=y.readability.contentScore,be=de/3;S.tagName!=="BODY";){if(!S.readability){S=S.parentNode;continue}var F=S.readability.contentScore;if(F<be)break;if(F>de){y=S;break}de=S.readability.contentScore,S=S.parentNode}for(S=y.parentNode;S.tagName!="BODY"&&S.children.length==1;)y=S,S=y.parentNode;y.readability||this._initializeNode(y)}var M=t.createElement("DIV");e&&(M.id="readability-content");var $=Math.max(10,y.readability.contentScore*.2);S=y.parentNode;for(var ue=S.children,E=0,W=ue.length;E<W;E++){var P=ue[E],re=!1;if(this.log("Looking at sibling node:",P,P.readability?"with score "+P.readability.contentScore:""),this.log("Sibling has score",P.readability?P.readability.contentScore:"Unknown"),P===y)re=!0;else{var ye=0;if(P.className===y.className&&y.className!==""&&(ye+=y.readability.contentScore*.2),P.readability&&P.readability.contentScore+ye>=$)re=!0;else if(P.nodeName==="P"){var xe=this._getLinkDensity(P),Re=this._getInnerText(P),fe=Re.length;(fe>80&&xe<.25||fe<80&&fe>0&&xe===0&&Re.search(/\.( |$)/)!==-1)&&(re=!0)}}re&&(this.log("Appending node:",P),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(P.nodeName)===-1&&(this.log("Altering sibling:",P,"to div."),P=this._setNodeTag(P,"DIV")),M.appendChild(P),ue=S.children,E-=1,W-=1)}if(this._debug&&this.log("Article content pre-prep: "+M.innerHTML),this._prepArticle(M),this._debug&&this.log("Article content post-prep: "+M.innerHTML),q)y.id="readability-page-1",y.className="page";else{var Te=t.createElement("DIV");for(Te.id="readability-page-1",Te.className="page";M.firstChild;)Te.appendChild(M.firstChild);M.appendChild(Te)}this._debug&&this.log("Article content after paging: "+M.innerHTML);var we=!0,ge=this._getInnerText(M,!0).length;if(ge<this._charThreshold)if(we=!1,i.innerHTML=a,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:M,textLength:ge});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:M,textLength:ge});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:M,textLength:ge});else{if(this._attempts.push({articleContent:M,textLength:ge}),this._attempts.sort(function(X,se){return se.textLength-X.textLength}),!this._attempts[0].textLength)return null;M=this._attempts[0].articleContent,we=!0}if(we){var ke=[S,y].concat(this._getNodeAncestors(S));return this._someNode(ke,function(X){if(!X.tagName)return!1;var se=X.getAttribute("dir");return se?(this._articleDir=se,!0):!1}),M}}},_isValidByline:function(i){return typeof i=="string"||i instanceof String?(i=i.trim(),i.length>0&&i.length<100):!1},_unescapeHtmlEntities:function(i){if(!i)return i;var t=this.HTML_ESCAPE_MAP;return i.replace(/&(quot|amp|apos|lt|gt);/g,function(e,a){return t[a]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(e,a,s){var n=parseInt(a||s,a?16:10);return String.fromCharCode(n)})},_getJSONLD:function(i){var t=this._getAllNodesWithTag(i,["script"]),e;return this._forEachNode(t,function(a){if(!e&&a.getAttribute("type")==="application/ld+json")try{var s=a.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),n=JSON.parse(s);if(!n["@context"]||!n["@context"].match(/^https?\:\/\/schema\.org$/)||(!n["@type"]&&Array.isArray(n["@graph"])&&(n=n["@graph"].find(function(c){return(c["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!n||!n["@type"]||!n["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(e={},typeof n.name=="string"&&typeof n.headline=="string"&&n.name!==n.headline){var r=this._getArticleTitle(),o=this._textSimilarity(n.name,r)>.75,p=this._textSimilarity(n.headline,r)>.75;p&&!o?e.title=n.headline:e.title=n.name}else typeof n.name=="string"?e.title=n.name.trim():typeof n.headline=="string"&&(e.title=n.headline.trim());n.author&&(typeof n.author.name=="string"?e.byline=n.author.name.trim():Array.isArray(n.author)&&n.author[0]&&typeof n.author[0].name=="string"&&(e.byline=n.author.filter(function(c){return c&&typeof c.name=="string"}).map(function(c){return c.name.trim()}).join(", "))),typeof n.description=="string"&&(e.excerpt=n.description.trim()),n.publisher&&typeof n.publisher.name=="string"&&(e.siteName=n.publisher.name.trim()),typeof n.datePublished=="string"&&(e.datePublished=n.datePublished.trim());return}catch(c){this.log(c.message)}}),e||{}},_getArticleMetadata:function(i){var t={},e={},a=this._doc.getElementsByTagName("meta"),s=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,n=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(a,function(r){var o=r.getAttribute("name"),p=r.getAttribute("property"),c=r.getAttribute("content");if(c){var d=null,h=null;p&&(d=p.match(s),d&&(h=d[0].toLowerCase().replace(/\s/g,""),e[h]=c.trim())),!d&&o&&n.test(o)&&(h=o,c&&(h=h.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),e[h]=c.trim()))}}),t.title=i.title||e["dc:title"]||e["dcterm:title"]||e["og:title"]||e["weibo:article:title"]||e["weibo:webpage:title"]||e.title||e["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=i.byline||e["dc:creator"]||e["dcterm:creator"]||e.author,t.excerpt=i.excerpt||e["dc:description"]||e["dcterm:description"]||e["og:description"]||e["weibo:article:description"]||e["weibo:webpage:description"]||e.description||e["twitter:description"],t.siteName=i.siteName||e["og:site_name"],t.publishedTime=i.datePublished||e["article:published_time"]||null,t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t.publishedTime=this._unescapeHtmlEntities(t.publishedTime),t},_isSingleImage:function(i){return i.tagName==="IMG"?!0:i.children.length!==1||i.textContent.trim()!==""?!1:this._isSingleImage(i.children[0])},_unwrapNoscriptImages:function(i){var t=Array.from(i.getElementsByTagName("img"));this._forEachNode(t,function(a){for(var s=0;s<a.attributes.length;s++){var n=a.attributes[s];switch(n.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(n.value))return}a.parentNode.removeChild(a)});var e=Array.from(i.getElementsByTagName("noscript"));this._forEachNode(e,function(a){var s=i.createElement("div");if(s.innerHTML=a.innerHTML,!!this._isSingleImage(s)){var n=a.previousElementSibling;if(n&&this._isSingleImage(n)){var r=n;r.tagName!=="IMG"&&(r=n.getElementsByTagName("img")[0]);for(var o=s.getElementsByTagName("img")[0],p=0;p<r.attributes.length;p++){var c=r.attributes[p];if(c.value!==""&&(c.name==="src"||c.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(c.value))){if(o.getAttribute(c.name)===c.value)continue;var d=c.name;o.hasAttribute(d)&&(d="data-old-"+d),o.setAttribute(d,c.value)}}a.parentNode.replaceChild(s.firstElementChild,n)}}})},_removeScripts:function(i){this._removeNodes(this._getAllNodesWithTag(i,["script","noscript"]))},_hasSingleTagInsideElement:function(i,t){return i.children.length!=1||i.children[0].tagName!==t?!1:!this._someNode(i.childNodes,function(e){return e.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)})},_isElementWithoutContent:function(i){return i.nodeType===this.ELEMENT_NODE&&i.textContent.trim().length==0&&(i.children.length==0||i.children.length==i.getElementsByTagName("br").length+i.getElementsByTagName("hr").length)},_hasChildBlockElement:function(i){return this._someNode(i.childNodes,function(t){return this.DIV_TO_P_ELEMS.has(t.tagName)||this._hasChildBlockElement(t)})},_isPhrasingContent:function(i){return i.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(i.tagName)!==-1||(i.tagName==="A"||i.tagName==="DEL"||i.tagName==="INS")&&this._everyNode(i.childNodes,this._isPhrasingContent)},_isWhitespace:function(i){return i.nodeType===this.TEXT_NODE&&i.textContent.trim().length===0||i.nodeType===this.ELEMENT_NODE&&i.tagName==="BR"},_getInnerText:function(i,t){t=typeof t=="undefined"?!0:t;var e=i.textContent.trim();return t?e.replace(this.REGEXPS.normalize," "):e},_getCharCount:function(i,t){return t=t||",",this._getInnerText(i).split(t).length-1},_cleanStyles:function(i){if(!(!i||i.tagName.toLowerCase()==="svg")){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)i.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(i.tagName)!==-1&&(i.removeAttribute("width"),i.removeAttribute("height"));for(var e=i.firstElementChild;e!==null;)this._cleanStyles(e),e=e.nextElementSibling}},_getLinkDensity:function(i){var t=this._getInnerText(i).length;if(t===0)return 0;var e=0;return this._forEachNode(i.getElementsByTagName("a"),function(a){var s=a.getAttribute("href"),n=s&&this.REGEXPS.hashUrl.test(s)?.3:1;e+=this._getInnerText(a).length*n}),e/t},_getClassWeight:function(i){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return typeof i.className=="string"&&i.className!==""&&(this.REGEXPS.negative.test(i.className)&&(t-=25),this.REGEXPS.positive.test(i.className)&&(t+=25)),typeof i.id=="string"&&i.id!==""&&(this.REGEXPS.negative.test(i.id)&&(t-=25),this.REGEXPS.positive.test(i.id)&&(t+=25)),t},_clean:function(i,t){var e=["object","embed","iframe"].indexOf(t)!==-1;this._removeNodes(this._getAllNodesWithTag(i,[t]),function(a){if(e){for(var s=0;s<a.attributes.length;s++)if(this._allowedVideoRegex.test(a.attributes[s].value))return!1;if(a.tagName==="object"&&this._allowedVideoRegex.test(a.innerHTML))return!1}return!0})},_hasAncestorTag:function(i,t,e,a){e=e||3,t=t.toUpperCase();for(var s=0;i.parentNode;){if(e>0&&s>e)return!1;if(i.parentNode.tagName===t&&(!a||a(i.parentNode)))return!0;i=i.parentNode,s++}return!1},_getRowAndColumnCount:function(i){for(var t=0,e=0,a=i.getElementsByTagName("tr"),s=0;s<a.length;s++){var n=a[s].getAttribute("rowspan")||0;n&&(n=parseInt(n,10)),t+=n||1;for(var r=0,o=a[s].getElementsByTagName("td"),p=0;p<o.length;p++){var c=o[p].getAttribute("colspan")||0;c&&(c=parseInt(c,10)),r+=c||1}e=Math.max(e,r)}return{rows:t,columns:e}},_markDataTables:function(i){for(var t=i.getElementsByTagName("table"),e=0;e<t.length;e++){var a=t[e],s=a.getAttribute("role");if(s=="presentation"){a._readabilityDataTable=!1;continue}var n=a.getAttribute("datatable");if(n=="0"){a._readabilityDataTable=!1;continue}var r=a.getAttribute("summary");if(r){a._readabilityDataTable=!0;continue}var o=a.getElementsByTagName("caption")[0];if(o&&o.childNodes.length>0){a._readabilityDataTable=!0;continue}var p=["col","colgroup","tfoot","thead","th"],c=function(h){return!!a.getElementsByTagName(h)[0]};if(p.some(c)){this.log("Data table because found data-y descendant"),a._readabilityDataTable=!0;continue}if(a.getElementsByTagName("table")[0]){a._readabilityDataTable=!1;continue}var d=this._getRowAndColumnCount(a);if(d.rows>=10||d.columns>4){a._readabilityDataTable=!0;continue}a._readabilityDataTable=d.rows*d.columns>10}},_fixLazyImages:function(i){this._forEachNode(this._getAllNodesWithTag(i,["img","picture","figure"]),function(t){if(t.src&&this.REGEXPS.b64DataUrl.test(t.src)){var e=this.REGEXPS.b64DataUrl.exec(t.src);if(e[1]==="image/svg+xml")return;for(var a=!1,s=0;s<t.attributes.length;s++){var n=t.attributes[s];if(n.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(n.value)){a=!0;break}}if(a){var r=t.src.search(/base64\s*/i)+7,o=t.src.length-r;o<133&&t.removeAttribute("src")}}if(!((t.src||t.srcset&&t.srcset!="null")&&t.className.toLowerCase().indexOf("lazy")===-1)){for(var p=0;p<t.attributes.length;p++)if(n=t.attributes[p],!(n.name==="src"||n.name==="srcset"||n.name==="alt")){var c=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(n.value)?c="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(n.value)&&(c="src"),c){if(t.tagName==="IMG"||t.tagName==="PICTURE")t.setAttribute(c,n.value);else if(t.tagName==="FIGURE"&&!this._getAllNodesWithTag(t,["img","picture"]).length){var d=this._doc.createElement("img");d.setAttribute(c,n.value),t.appendChild(d)}}}}})},_getTextDensity:function(i,t){var e=this._getInnerText(i,!0).length;if(e===0)return 0;var a=0,s=this._getAllNodesWithTag(i,t);return this._forEachNode(s,n=>a+=this._getInnerText(n,!0).length),a/e},_cleanConditionally:function(i,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(i,[t]),function(e){var a=function(S){return S._readabilityDataTable},s=t==="ul"||t==="ol";if(!s){var n=0,r=this._getAllNodesWithTag(e,["ul","ol"]);this._forEachNode(r,S=>n+=this._getInnerText(S).length),s=n/this._getInnerText(e).length>.9}if(t==="table"&&a(e)||this._hasAncestorTag(e,"table",-1,a)||this._hasAncestorTag(e,"code"))return!1;var o=this._getClassWeight(e);this.log("Cleaning Conditionally",e);var p=0;if(o+p<0)return!0;if(this._getCharCount(e,",")<10){for(var c=e.getElementsByTagName("p").length,d=e.getElementsByTagName("img").length,h=e.getElementsByTagName("li").length-100,C=e.getElementsByTagName("input").length,A=this._getTextDensity(e,["h1","h2","h3","h4","h5","h6"]),x=0,T=this._getAllNodesWithTag(e,["object","embed","iframe"]),N=0;N<T.length;N++){for(var j=0;j<T[N].attributes.length;j++)if(this._allowedVideoRegex.test(T[N].attributes[j].value))return!1;if(T[N].tagName==="object"&&this._allowedVideoRegex.test(T[N].innerHTML))return!1;x++}var U=this._getLinkDensity(e),z=this._getInnerText(e).length,y=d>1&&c/d<.5&&!this._hasAncestorTag(e,"figure")||!s&&h>c||C>Math.floor(c/3)||!s&&A<.9&&z<25&&(d===0||d>2)&&!this._hasAncestorTag(e,"figure")||!s&&o<25&&U>.2||o>=25&&U>.5||x===1&&z<75||x>1;if(s&&y){for(var q=0;q<e.children.length;q++)if(e.children[q].children.length>1)return y;let S=e.getElementsByTagName("li").length;if(d==S)return!1}return y}return!1})},_cleanMatchedNodes:function(i,t){for(var e=this._getNextNode(i,!0),a=this._getNextNode(i);a&&a!=e;)t.call(this,a,a.className+" "+a.id)?a=this._removeAndGetNext(a):a=this._getNextNode(a)},_cleanHeaders:function(i){let t=this._getAllNodesWithTag(i,["h1","h2"]);this._removeNodes(t,function(e){let a=this._getClassWeight(e)<0;return a&&this.log("Removing header with low class weight:",e),a})},_headerDuplicatesTitle:function(i){if(i.tagName!="H1"&&i.tagName!="H2")return!1;var t=this._getInnerText(i,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(i){return(this._flags&i)>0},_removeFlag:function(i){this._flags=this._flags&~i},_isProbablyVisible:function(i){return(!i.style||i.style.display!="none")&&(!i.style||i.style.visibility!="hidden")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.indexOf&&i.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var i=this._doc.getElementsByTagName("*").length;if(i>this._maxElemsToParse)throw new Error("Aborting parsing document; "+i+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var e=this._getArticleMetadata(t);this._articleTitle=e.title;var a=this._grabArticle();if(!a)return null;if(this.log("Grabbed: "+a.innerHTML),this._postProcessContent(a),!e.excerpt){var s=a.getElementsByTagName("p");s.length>0&&(e.excerpt=s[0].textContent.trim())}var n=a.textContent;return{title:this._articleTitle,byline:e.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(a),textContent:n,length:n.length,excerpt:e.excerpt,siteName:e.siteName||this._articleSiteName,publishedTime:e.publishedTime}}};typeof Yi=="object"&&(Yi.exports=fn)});var yn=st((Yo,Xi)=>{var bn={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function ns(i){return(!i.style||i.style.display!="none")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.indexOf&&i.className.indexOf("fallback-image")!==-1)}function rs(i,t={}){typeof t=="function"&&(t={visibilityChecker:t});var e={minScore:20,minContentLength:140,visibilityChecker:ns};t=Object.assign(e,t);var a=i.querySelectorAll("p, pre, article"),s=i.querySelectorAll("div > br");if(s.length){var n=new Set(a);[].forEach.call(s,function(o){n.add(o.parentNode)}),a=Array.from(n)}var r=0;return[].some.call(a,function(o){if(!t.visibilityChecker(o))return!1;var p=o.className+" "+o.id;if(bn.unlikelyCandidates.test(p)&&!bn.okMaybeItsACandidate.test(p)||o.matches("li p"))return!1;var c=o.textContent.trim().length;return c<t.minContentLength?!1:(r+=Math.sqrt(c-t.minContentLength),r>t.minScore)})}typeof Xi=="object"&&(Xi.exports=rs)});var Tn=st((Xo,xn)=>{var ss=vn(),os=yn();xn.exports={Readability:ss,isProbablyReaderable:os}});var cs={};or(cs,{default:()=>ai});module.exports=lr(cs);var ht=require("obsidian");function _a(){return[{label:"New Line",option:"newLine"},{label:"Comma",option:"comma"},{label:"Period",option:"period"},{label:"Semicolon",option:"semicolon"}]}function Ca(i){switch(i){case"newLine":return`
`;case"comma":return",";case"period":return".";case"semicolon":return";"}}function Da(){return[{label:"Ask",option:"ask"},{label:"Nothing",option:"nothing"},{label:"Append to the existing note",option:"appendToExisting"}]}var m={inboxDir:"ReadItLater Inbox",assetsDir:"ReadItLater Inbox/assets",openNewNote:!1,batchProcess:!1,batchProcessDelimiter:"newLine",openNewNoteInNewTab:!1,youtubeContentTypeSlug:"youtube",youtubeNoteTitle:"Youtube - {{ title }}",youtubeNote:`[[ReadItLater]] [[Youtube]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,youtubeEmbedWidth:"560",youtubeEmbedHeight:"315",youtubeUsePrivacyEnhancedEmbed:!0,vimeoContentTypeSlug:"vimeo",vimeoNoteTitle:"Vimeo - {{ title }}",vimeoNote:`[[ReadItLater]] [[Vimeo]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}

{{ videoChapters }}`,vimeoEmbedWidth:"560",vimeoEmbedHeight:"315",bilibiliContentTypeSlug:"bilibili",bilibiliNoteTitle:"Bilibili - {{ title }}",bilibiliNote:`[[ReadItLater]] [[Bilibili]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,bilibiliEmbedWidth:"560",bilibiliEmbedHeight:"315",twitterContentTypeSlug:"xcom",twitterNoteTitle:"Tweet from {{ tweetAuthorName }} ({{ date }})",twitterNote:`[[ReadItLater]] [[Tweet]]

# [{{ tweetAuthorName }}]({{ tweetURL }})

{{ tweetContent }}`,parseableArticleContentType:"article",parseableArticleNoteTitle:"{{ title }}",parsableArticleNote:`[[ReadItLater]] [[Article]]

# [{{ articleTitle }}]({{ articleURL }})

{{ articleContent }}`,notParseableArticleContentType:"article",notParseableArticleNoteTitle:"Article {{ date }}",notParsableArticleNote:`[[ReadItLater]] [[Article]]

[{{ articleURL }}]({{ articleURL }})`,textSnippetContentType:"textsnippet",textSnippetNoteTitle:"Note {{ date }}",textSnippetNote:`[[ReadItLater]] [[Textsnippet]]

{{ content }}`,mastodonContentTypeSlug:"mastodon",mastodonNoteTitle:"Toot from {{ tootAuthorName }} ({{ date }})",mastodonNote:`[[ReadItLater]] [[Toot]]

# [{{ tootAuthorName }}]({{ tootURL }})

> {{ tootContent }}`,downloadImages:!0,downloadImagesInArticleDir:!1,dateTitleFmt:"YYYY-MM-DD HH-mm-ss",dateContentFmt:"YYYY-MM-DD",downloadMastodonMediaAttachments:!0,downloadMastodonMediaAttachmentsInDir:!1,saveMastodonReplies:!1,mastodonReply:`[{{ tootAuthorName }}]({{ tootURL }})

> {{ tootContent }}`,stackExchangeContentType:"stackexchange",stackExchangeNoteTitle:"{{ title }}",stackExchangeNote:`[[ReadItLater]] [[StackExchange]]

# [{{ questionTitle }}]({{ questionURL }})

Author: [{{ authorName }}]({{ authorProfileURL }})

{{ questionContent }}

***

{{ topAnswer }}

{{ answers }}`,stackExchangeAnswer:`Answered by: [{{ authorName }}]({{ authorProfileURL }})

{{ answerContent }}`,downloadStackExchangeAssets:!0,downloadStackExchangeAssetsInDir:!1,youtubeApiKey:"",tikTokContentTypeSlug:"tiktok",tikTokNoteTitle:"TikTok from {{ authorName }} ({{ date }})",tikTokNote:`[[ReadItLater]] [[TikTok]]

{{ videoDescription }}

[{{ videoURL }}]({{ videoURL }})

{{ videoPlayer }}`,tikTokEmbedWidth:"325",tikTokEmbedHeight:"760",extendShareMenu:!0,filesystemLimitPath:null,filesystemLimitFileName:null,youtubeChannelContentTypeSlug:"youtube-channel",youtubeChannelNoteTitle:"{{ title }}",youtubeChannelNote:`[[ReadItLater]] [[YoutubeChannel]]

# [{{ channelTitle }}]({{ channelURL }})

![{{ channelTitle }}|300]({{ channelAvatar }})

[Videos]({{ channelVideosURL }})

{{ channelSubscribersCount|numberLexify }} subscribers`,fileExistsStrategy:"ask",blueskyContentTypeSlug:"bluesky",blueskyNoteTitle:"Status from {{ authorName }} ({{ date }})",blueskyNote:`[[ReadItLater]] [[Bluesky]]

# [{{ authorName }}]({{ postURL }})

{{ content|blockquote }}`,downloadBlueskyEmbeds:!0,downloadBlueskyEmbedsInDir:!1,saveBlueskyPostReplies:!1,blueskyPostReply:`[{{ authorName }}]({{ postURL }})

{{ content|blockquote }}`,pinterestContentTypeSlug:"pinterest",pinterestNoteTitle:"Pin from {{ authorName }} ({{ date }})",pinterestNote:`[[ReadItLater]] [[Pinterest]]

# [{{ authorName }}]({{ pinURL }})

![]({{ image }})
{{ description }}`,downloadPinterestImage:!0};var g=require("obsidian");var Oa=require("obsidian");var Ra={"application/prs.cww":["cww"],"application/prs.xsf+xml":["xsf"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["*xfdf"],"application/vnd.age":["age"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["*fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["*mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.pwg-xhtml-print+xml":["xhtm"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml","uo"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["*prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["*sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["*aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.cld":["cld"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.pytha.pyox":["pyo","pyox"],"model/vnd.sap.vds":["vds"],"model/vnd.usda":["usda"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.familysearch.gedcom":["ged"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};Object.freeze(Ra);var La=Ra;var Ia={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(Ia);var Fa=Ia;var Se=function(i,t,e,a){if(e==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!a:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?a:e==="a"?a.call(i):a?a.value:t.get(i)},ot,Tt,Je,Ai=class{constructor(...t){ot.set(this,new Map),Tt.set(this,new Map),Je.set(this,new Map);for(let e of t)this.define(e)}define(t,e=!1){for(let[a,s]of Object.entries(t)){a=a.toLowerCase(),s=s.map(o=>o.toLowerCase()),Se(this,Je,"f").has(a)||Se(this,Je,"f").set(a,new Set);let n=Se(this,Je,"f").get(a),r=!0;for(let o of s){let p=o.startsWith("*");if(o=p?o.slice(1):o,n==null||n.add(o),r&&Se(this,Tt,"f").set(a,o),r=!1,p)continue;let c=Se(this,ot,"f").get(o);if(c&&c!=a&&!e)throw new Error(`"${a} -> ${o}" conflicts with "${c} -> ${o}". Pass \`force=true\` to override this definition.`);Se(this,ot,"f").set(o,a)}}return this}getType(t){var r;if(typeof t!="string")return null;let e=t.replace(/^.*[/\\]/,"").toLowerCase(),a=e.replace(/^.*\./,"").toLowerCase(),s=e.length<t.length;return!(a.length<e.length-1)&&s?null:(r=Se(this,ot,"f").get(a))!=null?r:null}getExtension(t){var e,a;return typeof t!="string"?null:(t=(e=t==null?void 0:t.split)==null?void 0:e.call(t,";")[0],(a=t&&Se(this,Tt,"f").get(t.trim().toLowerCase()))!=null?a:null)}getAllExtensions(t){var e;return typeof t!="string"?null:(e=Se(this,Je,"f").get(t.toLowerCase()))!=null?e:null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(let t of Se(this,Je,"f").values())Object.freeze(t);return this}_getTestState(){return{types:Se(this,ot,"f"),extensions:Se(this,Tt,"f")}}};ot=new WeakMap,Tt=new WeakMap,Je=new WeakMap;var Si=Ai;var Ma=new Si(Fa,La)._freeze();function Fe(i,t=[]){let e;try{e=new URL(i)}catch(a){return!1}return t.length===0?!0:t.includes(e.protocol)}function Ua(i,t){return new URL(i,t).href}function G(i){return i.replace(/[:#/\\()|?*<>"[\u{1F300}-\u{1F9FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{1F000}-\u{1F02F}\u{1F0A0}-\u{1F0FF}\u{1F100}-\u{1F64F}\u{1F680}-\u{1F6FF}]/gu,"")}function wt(i,t,e,a){let s=`.${pr(t)}`,n=t;n.length>a.fileName&&(n=n.substring(0,a.fileName-s.length)+`${s}`);let r=(0,Oa.normalizePath)(`${i}/${n}`),o=e.getFullPath(r);return o.length>a.path&&(r=r.substring(0,r.length-(o.length-a.path)-s.length)+`${s}`),r}function Va(i,t){var a,s;let e=_i(i);return{path:(a=t.filesystemLimitPath)!=null?a:e.path,fileName:(s=t.filesystemLimitFileName)!=null?s:e.fileName}}function _i(i){return i.isLinux?ki(4096,255):i.isMacOS||i.isIosApp||i.isAndroidApp||i.isMobile?ki(1024,255):ki(256,256)}function pr(i){return i.includes(".")?i.split(".").pop():""}function Ba(i){var t;return(t=Ma.getExtension(i))!=null?t:""}function ki(i,t){return{path:i,fileName:t}}function $t(i){return createFragment(t=>t.createDiv().innerHTML=i)}var qt=class extends g.PluginSettingTab{constructor(e,a){super(e,a);_(this,"plugin");_(this,"activeDetatils",[]);this.plugin=a}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"General"}),new g.Setting(e).setName("Inbox directory").setDesc("Enter valid directory name. For nested directory use this format: Directory A/Directory B. If no directory is entered, new note will be created in vault root.").addText(n=>n.setPlaceholder("Defaults to vault root directory").setValue(typeof this.plugin.settings.inboxDir=="undefined"?m.inboxDir:this.plugin.settings.inboxDir).onChange(async r=>{this.plugin.settings.inboxDir=r,await this.plugin.saveSettings()})),new g.Setting(e).setName("Assets directory").setDesc("Enter valid directory name. For nested directory use this format: Directory A/Directory B. If no directory is entered, new note will be created in Vault root.").addText(n=>n.setPlaceholder("Defaults to vault root directory").setValue(typeof this.plugin.settings.assetsDir=="undefined"?m.inboxDir+"/assets":this.plugin.settings.assetsDir).onChange(async r=>{this.plugin.settings.assetsDir=r,await this.plugin.saveSettings()})),new g.Setting(e).setName("Open new note in current workspace").setDesc("If enabled, new note will open in current workspace").addToggle(n=>n.setValue(this.plugin.settings.openNewNote||m.openNewNote).onChange(async r=>{this.plugin.settings.openNewNote=r,r===!0&&(this.plugin.settings.openNewNoteInNewTab=!1),await this.plugin.saveSettings(),this.display()})),new g.Setting(e).setName("Open new note in new tab").setDesc("If enabled, new note will open in new tab").addToggle(n=>n.setValue(this.plugin.settings.openNewNoteInNewTab||m.openNewNoteInNewTab).onChange(async r=>{this.plugin.settings.openNewNoteInNewTab=r,r===!0&&(this.plugin.settings.openNewNote=!1),await this.plugin.saveSettings(),this.display()})),new g.Setting(e).setName("Duplicate note filename behavior").setDesc("Applied when note with the same filename already exists").addDropdown(n=>{Da().forEach(r=>n.addOption(r.option,r.label)),n.setValue(this.plugin.settings.fileExistsStrategy||m.fileExistsStrategy),n.onChange(async r=>{this.plugin.settings.fileExistsStrategy=r,await this.plugin.saveSettings()})}),new g.Setting(e).setName("Batch note creation delimiter").setDesc("Delimiter for batch list of notes").addDropdown(n=>{_a().forEach(r=>n.addOption(r.option,r.label)),n.setValue(this.plugin.settings.batchProcessDelimiter||m.batchProcessDelimiter),n.onChange(async r=>{this.plugin.settings.batchProcessDelimiter=r,await this.plugin.saveSettings()})}),new g.Setting(e).setName("Date format string").setDesc("Format of the %date% variable. NOTE: do not use symbols forbidden in file names.").addText(n=>n.setPlaceholder(`Defaults to ${m.dateTitleFmt}`).setValue(typeof this.plugin.settings.dateTitleFmt=="undefined"?m.dateTitleFmt:this.plugin.settings.dateTitleFmt).onChange(async r=>{this.plugin.settings.dateTitleFmt=r,await this.plugin.saveSettings()})),new g.Setting(e).setName("Date format string in content").setDesc("Format of the %date% variable for content").addText(n=>n.setPlaceholder(`Defaults to ${m.dateContentFmt}`).setValue(typeof this.plugin.settings.dateContentFmt=="undefined"?m.dateContentFmt:this.plugin.settings.dateContentFmt).onChange(async r=>{this.plugin.settings.dateContentFmt=r,await this.plugin.saveSettings()})),new g.Setting(e).setName("Extend share menu").setDesc("If enabled, share menu will be extended with shortcut to create note directly from it. Requires plugin reload or Obsidian restart to apply change.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"extendShareMenu")?this.plugin.settings.extendShareMenu:m.extendShareMenu).onChange(async r=>{this.plugin.settings.extendShareMenu=r,await this.plugin.saveSettings()})),new g.Setting(e).setName("Youtube Data API v3 key").setDesc("If entered, Youtube related content types will use Youtube API to fetc the data.").addText(n=>n.setPlaceholder("").setValue(this.plugin.settings.youtubeApiKey||m.youtubeApiKey).onChange(async r=>{this.plugin.settings.youtubeApiKey=r,await this.plugin.saveSettings()})),e.createEl("h1",{text:"Content Types"}),e.createDiv({text:"Settings for each content. Click on caret to expand."});let a;e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"readableArticle"),a.createEl("summary",{text:"Readable Article",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Readable content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.parseableArticleContentType).setValue(typeof this.plugin.settings.parseableArticleContentType=="undefined"?m.parseableArticleContentType:this.plugin.settings.parseableArticleContentType).onChange(async r=>{this.plugin.settings.parseableArticleContentType=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Readable article note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.parseableArticleNoteTitle).setValue(this.plugin.settings.parseableArticleNoteTitle||m.parseableArticleNoteTitle).onChange(async r=>{this.plugin.settings.parseableArticleNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Readable article note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.parsableArticleNote||m.parsableArticleNote).onChange(async r=>{this.plugin.settings.parsableArticleNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Download images").setDesc("Images from article will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadImages")?this.plugin.settings.downloadImages:m.downloadImages).onChange(async r=>{this.plugin.settings.downloadImages=r,r===!1&&(this.plugin.settings.downloadImagesInArticleDir=!1),await this.plugin.saveSettings(),this.display()})),new g.Setting(a).setName("Download images to note directory").setDesc("Images from article will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadImagesInArticleDir")?this.plugin.settings.downloadImagesInArticleDir:m.downloadImagesInArticleDir).onChange(async r=>{this.plugin.settings.downloadImagesInArticleDir=r,r===!0&&(this.plugin.settings.downloadImages=!0),await this.plugin.saveSettings(),this.display()})),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"youtube"),a.createEl("summary",{text:"YouTube",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Youtube content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.youtubeContentTypeSlug).setValue(typeof this.plugin.settings.youtubeContentTypeSlug=="undefined"?m.youtubeContentTypeSlug:this.plugin.settings.youtubeContentTypeSlug).onChange(async r=>{this.plugin.settings.youtubeContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Youtube note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.youtubeNoteTitle).setValue(this.plugin.settings.youtubeNoteTitle||m.youtubeNoteTitle).onChange(async r=>{this.plugin.settings.youtubeNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Youtube note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.youtubeNote||m.youtubeNote).onChange(async r=>{this.plugin.settings.youtubeNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Youtube embed player width").addText(n=>n.setPlaceholder(m.youtubeEmbedWidth).setValue(this.plugin.settings.youtubeEmbedWidth||m.youtubeEmbedWidth).onChange(async r=>{this.plugin.settings.youtubeEmbedWidth=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Youtube embed player height").addText(n=>n.setPlaceholder(m.youtubeEmbedHeight).setValue(this.plugin.settings.youtubeEmbedHeight||m.youtubeEmbedHeight).onChange(async r=>{this.plugin.settings.youtubeEmbedHeight=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Embed in privacy enhanced mode").setDesc("If enabled, content will be embeded in privacy enhanced mode, which prevents the use of views of it from influencing the viewer\u2019s browsing experience on YouTube.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"youtubeUsePrivacyEnhancedEmbed")?this.plugin.settings.youtubeUsePrivacyEnhancedEmbed:m.youtubeUsePrivacyEnhancedEmbed).onChange(async r=>{this.plugin.settings.youtubeUsePrivacyEnhancedEmbed=r,await this.plugin.saveSettings()})),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"youtubeChannel"),a.createEl("summary",{text:"YouTube channel",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Youtube channel content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.youtubeChannelContentTypeSlug).setValue(typeof this.plugin.settings.youtubeChannelContentTypeSlug=="undefined"?m.youtubeChannelContentTypeSlug:this.plugin.settings.youtubeChannelContentTypeSlug).onChange(async r=>{this.plugin.settings.youtubeChannelContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Youtube channel note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.youtubeChannelNoteTitle).setValue(this.plugin.settings.youtubeChannelNoteTitle||m.youtubeChannelNoteTitle).onChange(async r=>{this.plugin.settings.youtubeChannelNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Youtube channel note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.youtubeChannelNote||m.youtubeChannelNote).onChange(async r=>{this.plugin.settings.youtubeChannelNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"x"),a.createEl("summary",{text:"X.com",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("X.com content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.twitterContentTypeSlug).setValue(typeof this.plugin.settings.twitterContentTypeSlug=="undefined"?m.twitterContentTypeSlug:this.plugin.settings.twitterContentTypeSlug).onChange(async r=>{this.plugin.settings.twitterContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("X.com note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.twitterNoteTitle).setValue(this.plugin.settings.twitterNoteTitle||m.twitterNoteTitle).onChange(async r=>{this.plugin.settings.twitterNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("X.com note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.twitterNote||m.twitterNote).onChange(async r=>{this.plugin.settings.twitterNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"bluesky"),a.createEl("summary",{text:"Bluesky",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Bluesky content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.blueskyContentTypeSlug).setValue(typeof this.plugin.settings.blueskyContentTypeSlug=="undefined"?m.blueskyContentTypeSlug:this.plugin.settings.blueskyContentTypeSlug).onChange(async r=>{this.plugin.settings.blueskyContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Bluesky note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.blueskyNoteTitle).setValue(this.plugin.settings.blueskyNoteTitle||m.blueskyNoteTitle).onChange(async r=>{this.plugin.settings.blueskyNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Bluesky note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.blueskyNote||m.blueskyNote).onChange(async r=>{this.plugin.settings.blueskyNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Download embedded content").setDesc("Embedded content will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadBlueskyEmbeds")?this.plugin.settings.downloadBlueskyEmbeds:m.downloadBlueskyEmbeds).onChange(async r=>{this.plugin.settings.downloadBlueskyEmbeds=r,r===!1&&(this.plugin.settings.downloadBlueskyEmbedsInDir=!1),await this.plugin.saveSettings(),this.display()})),new g.Setting(a).setName("Download embedded content to note directory").setDesc("Embedded content will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadBlueskyEmbedsInDir")?this.plugin.settings.downloadBlueskyEmbedsInDir:m.downloadBlueskyEmbedsInDir).onChange(async r=>{this.plugin.settings.downloadBlueskyEmbedsInDir=r,r===!0&&(this.plugin.settings.downloadBlueskyEmbeds=!0),await this.plugin.saveSettings(),this.display()})),new g.Setting(a).setName("Save replies").setDesc("If enabled, post replies will be saved.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"saveBlueskyPostReplies")?this.plugin.settings.saveBlueskyPostReplies:m.saveBlueskyPostReplies).onChange(async r=>{this.plugin.settings.saveBlueskyPostReplies=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Bluesky post reply template").addTextArea(n=>{n.setValue(this.plugin.settings.blueskyPostReply||m.blueskyPostReply).onChange(async r=>{this.plugin.settings.blueskyPostReply=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"stackExchange"),a.createEl("summary",{text:"Stack Exchange",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Stack Exchange content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.stackExchangeContentType).setValue(typeof this.plugin.settings.stackExchangeContentType=="undefined"?m.stackExchangeContentType:this.plugin.settings.stackExchangeContentType).onChange(async r=>{this.plugin.settings.stackExchangeContentType=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Stack Exchange note title template").addText(n=>n.setPlaceholder(m.stackExchangeNoteTitle).setValue(this.plugin.settings.stackExchangeNoteTitle||m.stackExchangeNoteTitle).onChange(async r=>{this.plugin.settings.stackExchangeNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Stack Exchange question note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.stackExchangeNote||m.stackExchangeNote).onChange(async r=>{this.plugin.settings.stackExchangeNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Stack Exchange answer template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.stackExchangeAnswer||m.stackExchangeAnswer).onChange(async r=>{this.plugin.settings.stackExchangeAnswer=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Download media attachments").setDesc("Media attachments will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadStackExchangeAssets")?this.plugin.settings.downloadStackExchangeAssets:m.downloadStackExchangeAssets).onChange(async r=>{this.plugin.settings.downloadStackExchangeAssets=r,r===!1&&(this.plugin.settings.downloadStackExchangeAssetsInDir=!1),await this.plugin.saveSettings(),this.display()})),new g.Setting(a).setName("Download media attachments to note directory").setDesc("Media attachments will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadStackExchangeAssetsInDir")?this.plugin.settings.downloadStackExchangeAssetsInDir:m.downloadStackExchangeAssetsInDir).onChange(async r=>{this.plugin.settings.downloadStackExchangeAssetsInDir=r,r===!0&&(this.plugin.settings.downloadStackExchangeAssets=!0),await this.plugin.saveSettings(),this.display()})),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"pinterest"),a.createEl("summary",{text:"Pinterest",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Pinterest content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.pinterestContentTypeSlug).setValue(typeof this.plugin.settings.pinterestContentTypeSlug=="undefined"?m.pinterestContentTypeSlug:this.plugin.settings.pinterestContentTypeSlug).onChange(async r=>{this.plugin.settings.pinterestContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Pinterest note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.pinterestNoteTitle).setValue(this.plugin.settings.pinterestNoteTitle||m.pinterestNoteTitle).onChange(async r=>{this.plugin.settings.pinterestNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Pinterest note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.pinterestNote||m.pinterestNote).onChange(async r=>{this.plugin.settings.pinterestNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Download image").setDesc("Image will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadPinterestImage")?this.plugin.settings.downloadPinterestImage:m.downloadPinterestImage).onChange(async r=>{this.plugin.settings.downloadPinterestImage=r,await this.plugin.saveSettings()})),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"mastodon"),a.createEl("summary",{text:"Mastodon",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Mastodon content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.mastodonContentTypeSlug).setValue(typeof this.plugin.settings.mastodonContentTypeSlug=="undefined"?m.mastodonContentTypeSlug:this.plugin.settings.mastodonContentTypeSlug).onChange(async r=>{this.plugin.settings.mastodonContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Mastodon note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.mastodonNoteTitle).setValue(this.plugin.settings.mastodonNoteTitle||m.mastodonNoteTitle).onChange(async r=>{this.plugin.settings.mastodonNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Mastodon note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.mastodonNote||m.mastodonNote).onChange(async r=>{this.plugin.settings.mastodonNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Download media attachments").setDesc("Media attachments will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadMastodonMediaAttachments")?this.plugin.settings.downloadMastodonMediaAttachments:m.downloadMastodonMediaAttachments).onChange(async r=>{this.plugin.settings.downloadMastodonMediaAttachments=r,r===!1&&(this.plugin.settings.downloadMastodonMediaAttachmentsInDir=!1),await this.plugin.saveSettings(),this.display()})),new g.Setting(a).setName("Download media attachments to note directory").setDesc("Media attachments will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadMastodonMediaAttachmentsInDir")?this.plugin.settings.downloadMastodonMediaAttachmentsInDir:m.downloadMastodonMediaAttachmentsInDir).onChange(async r=>{this.plugin.settings.downloadMastodonMediaAttachmentsInDir=r,r===!0&&(this.plugin.settings.downloadMastodonMediaAttachments=!0),await this.plugin.saveSettings(),this.display()})),new g.Setting(a).setName("Save replies").setDesc("If enabled, replies of toot will be saved.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"saveMastodonReplies")?this.plugin.settings.saveMastodonReplies:m.saveMastodonReplies).onChange(async r=>{this.plugin.settings.saveMastodonReplies=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Mastodon reply template").addTextArea(n=>{n.setValue(this.plugin.settings.mastodonReply||m.mastodonReply).onChange(async r=>{this.plugin.settings.mastodonReply=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"vimeo"),a.createEl("summary",{text:"Vimeo",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Vimeo content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.vimeoContentTypeSlug).setValue(typeof this.plugin.settings.vimeoContentTypeSlug=="undefined"?m.vimeoContentTypeSlug:this.plugin.settings.vimeoContentTypeSlug).onChange(async r=>{this.plugin.settings.vimeoContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Vimeo note title template").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.vimeoNoteTitle).setValue(this.plugin.settings.vimeoNoteTitle||m.vimeoNoteTitle).onChange(async r=>{this.plugin.settings.vimeoNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Vimeo note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.vimeoNote||m.vimeoNote).onChange(async r=>{this.plugin.settings.vimeoNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Vimeo embed player width").addText(n=>n.setPlaceholder(m.vimeoEmbedWidth).setValue(this.plugin.settings.vimeoEmbedWidth||m.vimeoEmbedWidth).onChange(async r=>{this.plugin.settings.vimeoEmbedWidth=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Vimeo embed player height").addText(n=>n.setPlaceholder(m.vimeoEmbedHeight).setValue(this.plugin.settings.vimeoEmbedHeight||m.vimeoEmbedHeight).onChange(async r=>{this.plugin.settings.vimeoEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"bilibili"),a.createEl("summary",{text:"Bilibili",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Bilibili content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.bilibiliContentTypeSlug).setValue(typeof this.plugin.settings.bilibiliContentTypeSlug=="undefined"?m.bilibiliContentTypeSlug:this.plugin.settings.bilibiliContentTypeSlug).onChange(async r=>{this.plugin.settings.bilibiliContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Bilibili note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.bilibiliNoteTitle).setValue(this.plugin.settings.bilibiliNoteTitle||m.bilibiliNoteTitle).onChange(async r=>{this.plugin.settings.bilibiliNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Bilibili note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.bilibiliNote||m.bilibiliNote).onChange(async r=>{this.plugin.settings.bilibiliNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("Bilibili embed player width").addText(n=>n.setPlaceholder(m.bilibiliEmbedWidth).setValue(this.plugin.settings.bilibiliEmbedWidth||m.bilibiliEmbedWidth).onChange(async r=>{this.plugin.settings.bilibiliEmbedWidth=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Bilibili embed player height").addText(n=>n.setPlaceholder(m.bilibiliEmbedHeight).setValue(this.plugin.settings.bilibiliEmbedHeight||m.bilibiliEmbedHeight).onChange(async r=>{this.plugin.settings.bilibiliEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"tikTok"),a.createEl("summary",{text:"TikTok",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("TikTok content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.tikTokContentTypeSlug).setValue(typeof this.plugin.settings.tikTokContentTypeSlug=="undefined"?m.tikTokContentTypeSlug:this.plugin.settings.tikTokContentTypeSlug).onChange(async r=>{this.plugin.settings.tikTokContentTypeSlug=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("TikTok note title template").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.tikTokNoteTitle).setValue(this.plugin.settings.tikTokNoteTitle||m.tikTokNoteTitle).onChange(async r=>{this.plugin.settings.tikTokNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("TikTok note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.tikTokNote||m.tikTokNote).onChange(async r=>{this.plugin.settings.tikTokNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new g.Setting(a).setName("TikTok embed player width").addText(n=>n.setPlaceholder(m.tikTokEmbedWidth).setValue(this.plugin.settings.tikTokEmbedWidth||m.tikTokEmbedWidth).onChange(async r=>{this.plugin.settings.tikTokEmbedWidth=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("TikTok embed player height").addText(n=>n.setPlaceholder(m.tikTokEmbedHeight).setValue(this.plugin.settings.tikTokEmbedHeight||m.tikTokEmbedHeight).onChange(async r=>{this.plugin.settings.tikTokEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"nonReadableArticle"),a.createEl("summary",{text:"Nonreadable Article",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Nonreadable content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.notParseableArticleContentType).setValue(typeof this.plugin.settings.notParseableArticleContentType=="undefined"?m.notParseableArticleContentType:this.plugin.settings.notParseableArticleContentType).onChange(async r=>{this.plugin.settings.notParseableArticleContentType=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Nonreadable article note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.notParseableArticleNoteTitle).setValue(this.plugin.settings.notParseableArticleNoteTitle||m.notParseableArticleNoteTitle).onChange(async r=>{this.plugin.settings.notParseableArticleNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Nonreadable article note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.notParsableArticleNote||m.notParsableArticleNote).onChange(async r=>{this.plugin.settings.notParsableArticleNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("hr",{cls:"readitlater-setting-hr"}),a=this.createDetailsElement(e,"textSnippet"),a.createEl("summary",{text:"Text Snippet",cls:"readitlater-setting-h3"}),new g.Setting(a).setName("Text Snippet content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.textSnippetContentType).setValue(typeof this.plugin.settings.textSnippetContentType=="undefined"?m.textSnippetContentType:this.plugin.settings.textSnippetContentType).onChange(async r=>{this.plugin.settings.textSnippetContentType=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Text snippet note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(m.textSnippetNoteTitle).setValue(this.plugin.settings.textSnippetNoteTitle||m.textSnippetNoteTitle).onChange(async r=>{this.plugin.settings.textSnippetNoteTitle=r,await this.plugin.saveSettings()})),new g.Setting(a).setName("Text snippet note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.textSnippetNote||m.textSnippetNote).onChange(async r=>{this.plugin.settings.textSnippetNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("h2",{text:"Advanced"});let s=_i(g.Platform);new g.Setting(e).setName("Maximum file path length").setDesc(`Defaults to ${s.path} characters on your current platform.`).addText(n=>n.setPlaceholder(String(s.path)).onChange(async r=>{let o=r.trim();if(o!==""&&Number.isNaN(Number(o))){new g.Notice("Maximum file path length must be a number.");return}o===""?this.plugin.settings.filesystemLimitPath=null:this.plugin.settings.filesystemLimitPath=Number(o),await this.plugin.saveSettings()})),new g.Setting(e).setName("Maximum file name length").setDesc(`Defaults to ${s.fileName} characters on your current platform.`).addText(n=>n.setPlaceholder(String(s.fileName)).onChange(async r=>{let o=r.trim();if(o!==""&&Number.isNaN(Number(o))){new g.Notice("Maximum file name length must be a number.");return}o===""?this.plugin.settings.filesystemLimitFileName=null:this.plugin.settings.filesystemLimitFileName=Number(o),await this.plugin.saveSettings()}))}createDetailsElement(e,a){let s=e.createEl("details");return s.addEventListener("toggle",()=>{s.open?this.activeDetatils.push(a):this.activeDetatils=this.activeDetatils.filter(n=>n!==a)}),this.activeDetatils.includes(a)&&s.setAttribute("open",""),s}createTemplateVariableReferenceDiv(e=""){return $t(`<p>${e} See the <a href="https://github.com/DominikPieper/obsidian-ReadItLater?tab=readme-ov-file#template-engine">template variables reference</a></p>`)}};var je=require("obsidian"),Gt=jt(za());var ja=require("obsidian");function Me(i,t){throw new ja.Notice(`${t} Check the console output.`),i}var vr=/(const|let|var)\s+(\w+)\s*=\s*(.+?)\s*(?=(?:^|\s+)(const|let|var)\s+|$)/g;function Wt(i,t){return br(t).find(e=>e.name===i)}function br(i){let t=[],e;return i.forEach(a=>{for(;(e=vr.exec(a.textContent))!==null;)t.push({type:e[1].trim(),name:e[2].trim(),value:e[3].trim().replace(/;+\s*$/,"")})}),t}var Oe={"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"};var O=class{constructor(t,e,a,s,n){this.fileName=t;this.fileExtension=e;this.content=a;this.contentType=s;this.createdAt=n;_(this,"_filePath",null);this.fileName=G(this.fileName)}getFullFilename(){return`${this.fileName}.${this.fileExtension}`}get filePath(){return this._filePath}set filePath(t){this._filePath=t}};var $a=require("obsidian");function Nt(i,t){return(0,$a.moment)(i).format(t)}var H=class{constructor(t,e,a){_(this,"app");_(this,"plugin");_(this,"templateEngine");this.app=t,this.plugin=e,this.templateEngine=a}isValidUrl(t){return Fe(t)}getFormattedDateForFilename(t){return Nt(t,this.plugin.settings.dateTitleFmt)}getFormattedDateForContent(t){return Nt(t,this.plugin.settings.dateContentFmt)}};var Di=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|shorts\/)|youtu\.be\/)([a-zA-Z0-9_-]+)(?:\?([^&\s]+(?:&[^&\s]+)*))?$/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s=this.plugin.settings.youtubeApiKey===""?await this.parseSchema(e,a):await this.parseApiResponse(e,a),n=this.templateEngine.render(this.plugin.settings.youtubeNote,s),r=this.templateEngine.render(this.plugin.settings.youtubeNoteTitle,{title:s.videoTitle,date:this.getFormattedDateForFilename(a)});return new O(r,"md",n,this.plugin.settings.youtubeContentTypeSlug,a)}async parseApiResponse(e,a){var n,r,o,p,c,d,h,C,A,x,T,N,j;let s=this.PATTERN.exec(e)[1];try{let U=await(0,je.request)({method:"GET",url:`https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,statistics,status,topicDetails&id=${s}&key=${this.plugin.settings.youtubeApiKey}`,headers:{Accept:"application/json"}}),z=JSON.parse(U);if(z.items.length===0)throw new Error(`Video (${e}) cannot be fetched from API`);let y=z.items[0],q=await(0,je.request)({method:"GET",url:`https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails,statistics&id=${y.snippet.channelId}&key=${this.plugin.settings.youtubeApiKey}`,headers:{Accept:"application/json"}}),S=JSON.parse(q);if(S.items.length===0)throw new Error(`Channel (${y.snippet.channelId}) cannot be fetched from API`);let L=S.items[0],Y=(0,Gt.parse)(y.contentDetails.duration),Q=(o=(r=(n=y.snippet)==null?void 0:n.tags)==null?void 0:r.map(V=>V.replace(/[\s:\-_.]/g,"").replace(/^/,"#")))!=null?o:[],te=this.getVideoChapters(y.snippet.description);return{date:this.getFormattedDateForContent(a),videoId:y.id,videoURL:e,videoTitle:y.snippet.title,videoDescription:y.snippet.description,videoThumbnail:(N=(T=(C=(c=(p=y.snippet.thumbnails)==null?void 0:p.maxres)==null?void 0:c.url)!=null?C:(h=(d=y.snippet.thumbnails)==null?void 0:d.medium)==null?void 0:h.url)!=null?T:(x=(A=y.snippet.thumbnails)==null?void 0:A.default)==null?void 0:x.url)!=null?N:"",videoPlayer:this.getEmbedPlayer(y.id),videoDuration:(0,Gt.toSeconds)(Y),videoDurationFormatted:this.formatDuration(Y),videoPublishDate:(0,je.moment)(y.snippet.publishedAt).format(this.plugin.settings.dateContentFmt),videoViewsCount:y.statistics.viewCount,videoTags:Q.join(" "),videoChapters:this.formatVideoChapters(y.id,te),channelId:L.id,channelURL:`https://www.youtube.com/channel/${L.id}`,channelName:(j=L.snippet.title)!=null?j:"",extra:{thumbnails:y.snippet.thumbnails,publishedAt:(0,je.moment)(y.snippet.publishedAt).toDate(),tags:Q,channel:{thumbnails:L.snippet.thumbnails},chapters:te}}}catch(U){Me(U,"Unable to parse Youtube API response.")}}async parseSchema(e,a){var s,n,r,o,p,c,d,h,C,A,x,T,N,j,U,z,y,q,S,L,Y,Q,te,V,de,be,F,M,$,ue,E,W,P,re,ye,xe,Re,fe,Te,we,ge,ke,_e;try{let X=await(0,je.request)({method:"GET",url:e,headers:{...Oe}}),se=new DOMParser().parseFromString(X,"text/html"),Ce=Wt("ytInitialDataa",se.querySelectorAll("script")),J=typeof Ce!="undefined"?JSON.parse(Ce.value):{},B=se.querySelector('[itemtype*="http://schema.org/VideoObject"]');if(B===null)throw new Error("Unable to find Schema.org element in HTML.");let Ne=(n=(s=B==null?void 0:B.querySelector('[itemprop="identifier"]'))==null?void 0:s.getAttribute("content"))!=null?n:"",R=B.querySelector('[itemtype="http://schema.org/Person"]'),Ue=(N=(T=(A=(C=(h=(d=(c=(p=(o=(r=J==null?void 0:J.contents)==null?void 0:r.twoColumnWatchNextResults)==null?void 0:o.results)==null?void 0:p.results)==null?void 0:c.contents)==null?void 0:d[1])==null?void 0:h.videoSecondaryInfoRenderer)==null?void 0:C.attributedDescription)==null?void 0:A.content)!=null?T:(x=B==null?void 0:B.querySelector('[itemprop="description"]'))==null?void 0:x.getAttribute("content"))!=null?N:"",ze=this.getVideoChapters(Ue),Lt=(te=(Q=(Y=(L=(S=(q=(y=(z=(U=(j=J==null?void 0:J.engagementPanels)==null?void 0:j[5])==null?void 0:U.engagementPanelSectionListRenderer)==null?void 0:z.content)==null?void 0:y.structuredDescriptionContentRenderer)==null?void 0:q.items)==null?void 0:S[0])==null?void 0:L.videoDescriptionHeaderRenderer)==null?void 0:Y.publishDate)==null?void 0:Q.simpleText)!=null?te:"",ni=(P=(W=(E=(ue=($=(M=(F=(be=(de=(V=J==null?void 0:J.contents)==null?void 0:V.twoColumnWatchNextResults)==null?void 0:de.results)==null?void 0:be.results)==null?void 0:F.contents)==null?void 0:M[0])==null?void 0:$.videoPrimaryInfoRenderer)==null?void 0:ue.viewCount)==null?void 0:E.videoViewCountRenderer)==null?void 0:W.originalViewCount)!=null?P:0;return{date:this.getFormattedDateForContent(a),videoId:Ne,videoURL:e,videoTitle:(ye=(re=B==null?void 0:B.querySelector('[itemprop="name"]'))==null?void 0:re.getAttribute("content"))!=null?ye:"",videoDescription:Ue,videoThumbnail:(Re=(xe=se.querySelector('meta[property="og:image"]'))==null?void 0:xe.getAttribute("content"))!=null?Re:"",videoPlayer:this.getEmbedPlayer(Ne),videoDuration:0,videoDurationFormatted:"",videoPublishDate:Lt!==""?(0,je.moment)(Lt).format(this.plugin.settings.dateContentFmt):"",videoViewsCount:ni,videoTags:"",videoChapters:this.formatVideoChapters(Ne,ze),channelId:(Te=(fe=B==null?void 0:B.querySelector('[itemprop="channelId"'))==null?void 0:fe.getAttribute("content"))!=null?Te:"",channelURL:(ge=(we=R==null?void 0:R.querySelector('[itemprop="url"]'))==null?void 0:we.getAttribute("href"))!=null?ge:"",channelName:(_e=(ke=R==null?void 0:R.querySelector('[itemprop="name"]'))==null?void 0:ke.getAttribute("content"))!=null?_e:"",extra:null}}catch(X){Me(X,"Unable to parse Youtube schema from DOM.")}}formatDuration(e){let a="";return e.years>0&&(a=a.concat(" ",`${e.years}y`)),e.months>0&&(a=a.concat(" ",`${e.months}m`)),e.weeks>0&&(a=a.concat(" ",`${e.weeks}w`)),e.days>0&&(a=a.concat(" ",`${e.days}d`)),e.hours>0&&(a=a.concat(" ",`${e.hours}h`)),e.minutes>0&&(a=a.concat(" ",`${e.minutes}m`)),e.seconds>0&&(a=a.concat(" ",`${e.seconds}s`)),a.trim()}formatVideoChapters(e,a){return a.map(s=>`- [${s.timestamp}](https://www.youtube.com/watch?v=${e}&t=${s.seconds}) ${s.title}`).join(`
`)}getVideoChapters(e){let a=/^((?:\d{1,2}:)?(?:\d{1,2}):(?:\d{1,2}))\s+(.+)$/gm,s=[],n;for(;(n=a.exec(e))!==null;){let r=n[1].trim(),o=n[2].trim(),p=r.split(":"),c=0,d,h;p.length===3?[c,d,h]=p.map(Number):[d,h]=p.map(Number);let C=c*3600+d*60+h;s.push({timestamp:r,title:o,seconds:C})}return s}getEmbedPlayer(e){let a=this.plugin.settings.youtubeUsePrivacyEnhancedEmbed?"youtube-nocookie.com":"youtube.com";return`<iframe width="${this.plugin.settings.youtubeEmbedWidth}" height="${this.plugin.settings.youtubeEmbedHeight}" src="https://www.${a}/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}},qa=Di;var Wa=require("obsidian");var Pi=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/(vimeo.com)\/(\d+)?/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s=await this.parseSchema(e,a),n=this.templateEngine.render(this.plugin.settings.vimeoNote,s),r=this.templateEngine.render(this.plugin.settings.vimeoNoteTitle,{title:s.videoTitle,date:this.getFormattedDateForFilename(a)});return new O(r,"md",n,this.plugin.settings.vimeoContentTypeSlug,a)}async parseSchema(e,a){var d,h,C,A,x,T;let s=await(0,Wa.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"}}),r=new DOMParser().parseFromString(s,"text/html").querySelector('script[type="application/ld+json"]'),p=JSON.parse(r.textContent)[0],c=this.PATTERN.exec(e);return{date:this.getFormattedDateForContent(a),videoId:c.length===3?c[2]:"",videoURL:(d=p==null?void 0:p.url)!=null?d:"",videoTitle:(h=p==null?void 0:p.name)!=null?h:"",videoPlayer:`<iframe width="${this.plugin.settings.vimeoEmbedWidth}" height="${this.plugin.settings.vimeoEmbedHeight}" src="${p==null?void 0:p.embedUrl}" title="Vimeo video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,channelName:(A=(C=p==null?void 0:p.author)==null?void 0:C.name)!=null?A:"",channelURL:(T=(x=p==null?void 0:p.author)==null?void 0:x.url)!=null?T:""}}},Ga=Pi;var Ya=require("obsidian");var Ri=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/(bilibili.com)\/(video)?\/([a-z0-9]+)?/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s=await this.getNoteData(e,a),n=this.templateEngine.render(this.plugin.settings.bilibiliNote,s),r=this.templateEngine.render(this.plugin.settings.bilibiliNoteTitle,{title:s.videoTitle,date:this.getFormattedDateForFilename(a)});return new O(r,"md",n,this.plugin.settings.bilibiliContentTypeSlug,a)}async getNoteData(e,a){var o,p;let s=await(0,Ya.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36"}}),n=new DOMParser().parseFromString(s,"text/html"),r=(o=this.PATTERN.exec(e)[3])!=null?o:"";return{date:this.getFormattedDateForContent(a),videoId:r,videoTitle:(p=n.querySelector("[property~='og:title']").getAttribute("content"))!=null?p:"",videoURL:e,videoPlayer:`<iframe width="${this.plugin.settings.bilibiliEmbedWidth}" height="${this.plugin.settings.bilibiliEmbedHeight}" src="https://player.bilibili.com/player.html?autoplay=0&bvid=${r}" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>`}}},Xa=Ri;var Kt=require("obsidian");function yr(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a])}return i}function Mi(i,t){return Array(t+1).join(i)}function xr(i){return i.replace(/^\n*/,"")}function Tr(i){for(var t=i.length;t>0&&i[t-1]===`
`;)t--;return i.substring(0,t)}var wr=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Oi(i){return Ui(i,wr)}var Za=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function Qa(i){return Ui(i,Za)}function Nr(i){return tn(i,Za)}var en=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Er(i){return Ui(i,en)}function Ar(i){return tn(i,en)}function Ui(i,t){return t.indexOf(i.nodeName)>=0}function tn(i,t){return i.getElementsByTagName&&t.some(function(e){return i.getElementsByTagName(e).length})}var ce={};ce.paragraph={filter:"p",replacement:function(i){return`

`+i+`

`}};ce.lineBreak={filter:"br",replacement:function(i,t,e){return e.br+`
`}};ce.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(i,t,e){var a=Number(t.nodeName.charAt(1));if(e.headingStyle==="setext"&&a<3){var s=Mi(a===1?"=":"-",i.length);return`

`+i+`
`+s+`

`}else return`

`+Mi("#",a)+" "+i+`

`}};ce.blockquote={filter:"blockquote",replacement:function(i){return i=i.replace(/^\n+|\n+$/g,""),i=i.replace(/^/gm,"> "),`

`+i+`

`}};ce.list={filter:["ul","ol"],replacement:function(i,t){var e=t.parentNode;return e.nodeName==="LI"&&e.lastElementChild===t?`
`+i:`

`+i+`

`}};ce.listItem={filter:"li",replacement:function(i,t,e){i=i.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var a=e.bulletListMarker+"   ",s=t.parentNode;if(s.nodeName==="OL"){var n=s.getAttribute("start"),r=Array.prototype.indexOf.call(s.children,t);a=(n?Number(n)+r:r+1)+".  "}return a+i+(t.nextSibling&&!/\n$/.test(i)?`
`:"")}};ce.indentedCodeBlock={filter:function(i,t){return t.codeBlockStyle==="indented"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,t,e){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};ce.fencedCodeBlock={filter:function(i,t){return t.codeBlockStyle==="fenced"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,t,e){for(var a=t.firstChild.getAttribute("class")||"",s=(a.match(/language-(\S+)/)||[null,""])[1],n=t.firstChild.textContent,r=e.fence.charAt(0),o=3,p=new RegExp("^"+r+"{3,}","gm"),c;c=p.exec(n);)c[0].length>=o&&(o=c[0].length+1);var d=Mi(r,o);return`

`+d+s+`
`+n.replace(/\n$/,"")+`
`+d+`

`}};ce.horizontalRule={filter:"hr",replacement:function(i,t,e){return`

`+e.hr+`

`}};ce.inlineLink={filter:function(i,t){return t.linkStyle==="inlined"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,t){var e=t.getAttribute("href");e&&(e=e.replace(/([()])/g,"\\$1"));var a=Yt(t.getAttribute("title"));return a&&(a=' "'+a.replace(/"/g,'\\"')+'"'),"["+i+"]("+e+a+")"}};ce.referenceLink={filter:function(i,t){return t.linkStyle==="referenced"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,t,e){var a=t.getAttribute("href"),s=Yt(t.getAttribute("title"));s&&(s=' "'+s+'"');var n,r;switch(e.linkReferenceStyle){case"collapsed":n="["+i+"][]",r="["+i+"]: "+a+s;break;case"shortcut":n="["+i+"]",r="["+i+"]: "+a+s;break;default:var o=this.references.length+1;n="["+i+"]["+o+"]",r="["+o+"]: "+a+s}return this.references.push(r),n},references:[],append:function(i){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};ce.emphasis={filter:["em","i"],replacement:function(i,t,e){return i.trim()?e.emDelimiter+i+e.emDelimiter:""}};ce.strong={filter:["strong","b"],replacement:function(i,t,e){return i.trim()?e.strongDelimiter+i+e.strongDelimiter:""}};ce.code={filter:function(i){var t=i.previousSibling||i.nextSibling,e=i.parentNode.nodeName==="PRE"&&!t;return i.nodeName==="CODE"&&!e},replacement:function(i){if(!i)return"";i=i.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(i)?" ":"",e="`",a=i.match(/`+/gm)||[];a.indexOf(e)!==-1;)e=e+"`";return e+t+i+t+e}};ce.image={filter:"img",replacement:function(i,t){var e=Yt(t.getAttribute("alt")),a=t.getAttribute("src")||"",s=Yt(t.getAttribute("title")),n=s?' "'+s+'"':"";return a?"!["+e+"]("+a+n+")":""}};function Yt(i){return i?i.replace(/(\n+\s*)+/g,`
`):""}function an(i){this.options=i,this._keep=[],this._remove=[],this.blankRule={replacement:i.blankReplacement},this.keepReplacement=i.keepReplacement,this.defaultRule={replacement:i.defaultReplacement},this.array=[];for(var t in i.rules)this.array.push(i.rules[t])}an.prototype={add:function(i,t){this.array.unshift(t)},keep:function(i){this._keep.unshift({filter:i,replacement:this.keepReplacement})},remove:function(i){this._remove.unshift({filter:i,replacement:function(){return""}})},forNode:function(i){if(i.isBlank)return this.blankRule;var t;return(t=Li(this.array,i,this.options))||(t=Li(this._keep,i,this.options))||(t=Li(this._remove,i,this.options))?t:this.defaultRule},forEach:function(i){for(var t=0;t<this.array.length;t++)i(this.array[t],t)}};function Li(i,t,e){for(var a=0;a<i.length;a++){var s=i[a];if(Sr(s,t,e))return s}}function Sr(i,t,e){var a=i.filter;if(typeof a=="string"){if(a===t.nodeName.toLowerCase())return!0}else if(Array.isArray(a)){if(a.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof a=="function"){if(a.call(i,t,e))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function kr(i){var t=i.element,e=i.isBlock,a=i.isVoid,s=i.isPre||function(h){return h.nodeName==="PRE"};if(!(!t.firstChild||s(t))){for(var n=null,r=!1,o=null,p=Ka(o,t,s);p!==t;){if(p.nodeType===3||p.nodeType===4){var c=p.data.replace(/[ \r\n\t]+/g," ");if((!n||/ $/.test(n.data))&&!r&&c[0]===" "&&(c=c.substr(1)),!c){p=Ii(p);continue}p.data=c,n=p}else if(p.nodeType===1)e(p)||p.nodeName==="BR"?(n&&(n.data=n.data.replace(/ $/,"")),n=null,r=!1):a(p)||s(p)?(n=null,r=!0):n&&(r=!1);else{p=Ii(p);continue}var d=Ka(o,p,s);o=p,p=d}n&&(n.data=n.data.replace(/ $/,""),n.data||Ii(n))}}function Ii(i){var t=i.nextSibling||i.parentNode;return i.parentNode.removeChild(i),t}function Ka(i,t,e){return i&&i.parentNode===t||e(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var Vi=typeof window!="undefined"?window:{};function _r(){var i=Vi.DOMParser,t=!1;try{new i().parseFromString("","text/html")&&(t=!0)}catch(e){}return t}function Cr(){var i=function(){};return Dr()?i.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:i.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e},i}function Dr(){var i=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){Vi.ActiveXObject&&(i=!0)}return i}var Pr=_r()?Vi.DOMParser:Cr();function Rr(i,t){var e;if(typeof i=="string"){var a=Lr().parseFromString('<x-turndown id="turndown-root">'+i+"</x-turndown>","text/html");e=a.getElementById("turndown-root")}else e=i.cloneNode(!0);return kr({element:e,isBlock:Oi,isVoid:Qa,isPre:t.preformattedCode?Ir:null}),e}var Fi;function Lr(){return Fi=Fi||new Pr,Fi}function Ir(i){return i.nodeName==="PRE"||i.nodeName==="CODE"}function Fr(i,t){return i.isBlock=Oi(i),i.isCode=i.nodeName==="CODE"||i.parentNode.isCode,i.isBlank=Mr(i),i.flankingWhitespace=Or(i,t),i}function Mr(i){return!Qa(i)&&!Er(i)&&/^\s*$/i.test(i.textContent)&&!Nr(i)&&!Ar(i)}function Or(i,t){if(i.isBlock||t.preformattedCode&&i.isCode)return{leading:"",trailing:""};var e=Ur(i.textContent);return e.leadingAscii&&Ja("left",i,t)&&(e.leading=e.leadingNonAscii),e.trailingAscii&&Ja("right",i,t)&&(e.trailing=e.trailingNonAscii),{leading:e.leading,trailing:e.trailing}}function Ur(i){var t=i.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function Ja(i,t,e){var a,s,n;return i==="left"?(a=t.previousSibling,s=/ $/):(a=t.nextSibling,s=/^ /),a&&(a.nodeType===3?n=s.test(a.nodeValue):e.preformattedCode&&a.nodeName==="CODE"?n=!1:a.nodeType===1&&!Oi(a)&&(n=s.test(a.textContent))),n}var Vr=Array.prototype.reduce,Br=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Xt(i){if(!(this instanceof Xt))return new Xt(i);var t={rules:ce,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,a){return a.isBlock?`

`:""},keepReplacement:function(e,a){return a.isBlock?`

`+a.outerHTML+`

`:a.outerHTML},defaultReplacement:function(e,a){return a.isBlock?`

`+e+`

`:e}};this.options=yr({},t,i),this.rules=new an(this.options)}Xt.prototype={turndown:function(i){if(!jr(i))throw new TypeError(i+" is not a string, or an element/document/fragment node.");if(i==="")return"";var t=nn.call(this,new Rr(i,this.options));return Hr.call(this,t)},use:function(i){if(Array.isArray(i))for(var t=0;t<i.length;t++)this.use(i[t]);else if(typeof i=="function")i(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(i,t){return this.rules.add(i,t),this},keep:function(i){return this.rules.keep(i),this},remove:function(i){return this.rules.remove(i),this},escape:function(i){return Br.reduce(function(t,e){return t.replace(e[0],e[1])},i)}};function nn(i){var t=this;return Vr.call(i.childNodes,function(e,a){a=new Fr(a,t.options);var s="";return a.nodeType===3?s=a.isCode?a.nodeValue:t.escape(a.nodeValue):a.nodeType===1&&(s=zr.call(t,a)),rn(e,s)},"")}function Hr(i){var t=this;return this.rules.forEach(function(e){typeof e.append=="function"&&(i=rn(i,e.append(t.options)))}),i.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function zr(i){var t=this.rules.forNode(i),e=nn.call(this,i),a=i.flankingWhitespace;return(a.leading||a.trailing)&&(e=e.trim()),a.leading+t.replacement(e,i,this.options)+a.trailing}function rn(i,t){var e=Tr(i),a=xr(t),s=Math.max(i.length-e.length,t.length-a.length),n=`

`.substring(0,s);return e+n+a}function jr(i){return i!=null&&(typeof i=="string"||i.nodeType&&(i.nodeType===1||i.nodeType===9||i.nodeType===11))}var sn=Xt;var on=/highlight-(?:text|source)-([a-z0-9]+)/;function $r(i){i.addRule("highlightedCodeBlock",{filter:function(t){var e=t.firstChild;return t.nodeName==="DIV"&&on.test(t.className)&&e&&e.nodeName==="PRE"},replacement:function(t,e,a){var s=e.className||"",n=(s.match(on)||[null,""])[1];return`

`+a.fence+n+`
`+e.firstChild.textContent+`
`+a.fence+`

`}})}function qr(i){i.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var Wr=Array.prototype.indexOf,Ze={};Ze.tableCell={filter:["th","td"],replacement:function(i,t){return ln(i,t)+pn(t,"")}};Ze.tableRow={filter:"tr",replacement:function(i,t){var e="",a={left:":--",right:"--:",center:":-:"};if(Gr(t))for(var s=0;s<t.childNodes.length;s++){var n="---",r=(t.childNodes[s].getAttribute("align")||"").toLowerCase();r&&(n=a[r]||n),e+=ln(n,t.childNodes[s])+pn(t.childNodes[s],n)}return`
`+i+(e?`
`+e:"")}};Ze.table={filter:function(i){return i.nodeName==="TABLE"&&!cn(i)},replacement:function(i){return i=i.replace(`

`,`
`),`

`+i+`

`}};Ze.tableSection={filter:["thead","tbody","tfoot"],replacement:function(i){return i}};Ze.captionSection={filter:"caption",replacement:function(i,t){return t.parentNode.nodeName==="TABLE"&&t.parentNode.childNodes[0]===t?i:""}};function Gr(i){var t=i.parentNode,e=t;return(t.nodeName==="THEAD"||t.nodeName==="TFOOT"||t.nodeName==="TBODY")&&(e=t.parentNode),e.nodeName==="TABLE"&&e.rows[0]===i}function ln(i,t){var e=Wr.call(t.parentNode.childNodes,t),a=" ";return e===0&&(a="| "),i=i.replace(/\r\n/g,`
`).replace(/\n/g," "),i=i.replace(/\|/g,"\\|"),a+i+" |"}function pn(i,t){var e=i.getAttribute("colspan")||1;return e<=1?"":(" "+t+" |").repeat(e-1)}function cn(i){for(var t=i.parentNode;t;){if(t.nodeName==="TABLE")return!0;t=t.parentNode}return!1}function Yr(i){i.keep(function(e){return e.nodeName==="TABLE"&&cn(e)});for(var t in Ze)i.addRule(t,Ze[t])}function Xr(i){i.addRule("taskListItems",{filter:function(t){return t.type==="checkbox"&&t.parentNode.nodeName==="LI"},replacement:function(t,e){return(e.checked?"[x]":"[ ]")+" "}})}function mn(i){i.use([$r,qr,Yr,Xr])}async function He(i){let t=mn,e=new sn({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",emDelimiter:"*"});return e.use(t),e.addRule("torchlightCodeBlock",{filter:s=>s.nodeName==="PRE"&&s.firstChild.nodeName==="CODE"&&s.firstChild.firstChild.nodeName==="P",replacement:function(s,n,r){return n.querySelectorAll("p").forEach(o=>{o.innerHTML=o.innerHTML+`
`}),`

`+r.fence+n.firstChild.getAttribute("data-lang")+`
`+n.firstChild.textContent+`
`+r.fence+`

`}}),e.addRule("fencedCodeLangBlock",{filter:s=>s.nodeName=="PRE"&&(!s.firstChild||s.firstChild.nodeName!="CODE")&&!s.querySelector("img"),replacement:function(s,n,r){var T;n.innerHTML=n.innerHTML.replaceAll("<br-keep></br-keep>","<br>");let o=(T=n.id)==null?void 0:T.match(/code-lang-(.+)/),p=(o==null?void 0:o.length)>0?o[1]:"",c=n.textContent,d=r.fence.charAt(0),h=3,C=new RegExp("^"+d+"{3,}","gm"),A;for(;A=C.exec(c);)A[0].length>=h&&(h=A[0].length+1);let x=Array(h+1).join(d);return`

`+x+p+`
`+c.replace(/\n$/,"")+`
`+x+`

`}}),e.turndown(i)}var Bi=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/(https:\/\/(twitter|x).com\/([a-zA-Z0-9_]+\/)([a-zA-Z0-9_]+\/[a-zA-Z0-9_]+))/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s=new URL(e);s.hostname==="x.com"&&(s.hostname="twitter.com");let n=await this.getTweetNoteData(s,a),r=this.templateEngine.render(this.plugin.settings.twitterNote,n),o=this.templateEngine.render(this.plugin.settings.twitterNoteTitle,{tweetAuthorName:n.tweetAuthorName,date:this.getFormattedDateForFilename(a)});return new O(o,"md",r,this.plugin.settings.twitterContentTypeSlug,a)}async getTweetNoteData(e,a){let s=JSON.parse(await(0,Kt.request)({method:"GET",contentType:"application/json",url:`https://publish.twitter.com/oembed?url=${e.href}`})),n=await He(s.html);return{date:this.getFormattedDateForContent(a),tweetAuthorName:s.author_name,tweetURL:s.url,tweetContent:n,tweetPublishDate:this.getPublishedDateFromDOM(s.html)}}getPublishedDateFromDOM(e){let s=new DOMParser().parseFromString(e,"text/html").querySelector("blockquote > a"),n=(0,Kt.moment)(s.textContent);return n.isValid()?n.format(this.plugin.settings.dateContentFmt):""}},dn=Bi;var Jt=require("obsidian"),Wi=jt($i());var $e=require("obsidian");var pt="http:",ct="https:";function qi(i){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="";for(let a=0;a<i;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function gn(i,t){let e=i.trim().split(Ca(t)).filter(s=>s.trim().length>0),a=e.reduce((s,n)=>s&&Fe(n,[pt,ct]),!0);return{urls:e,everyLineIsURL:a}}var Jr=/!\[(?<anchor>.*?)\]\((?<link>.+?)\)/g,Zr=5,Qr=1e3;async function Pe(i,t,e,a){return await es(e,Jr,ts(i,t,a))}async function es(i,t,e){try{if(typeof e=="function"){let a=[];return String.prototype.replace.call(i,t,function(s,n,r){return a.push(e(s,n,r)),""}),Promise.all(a).then(function(s){return String.prototype.replace.call(i,t,function(){return s.shift()})})}else return Promise.resolve(String.prototype.replace.call(i,t,e))}catch(a){return console.error(),Promise.reject(a)}}function ts(i,t,e){return async function(s,n,r){if(!Fe(r,[pt,ct]))return s;let o=new URL(r);await i.getVaultRepository().createDirectory(e);try{let{fileContent:p,fileExtension:c}=await as(o),d=0;for(;d<Zr;)try{let{fileName:h,needWrite:C}=await is(i.app.vault.adapter,i.getFileSystemLimits(),e,t,c);if(C&&h!==""){await i.app.vault.createBinary(h,p);let A=h.replace(/\s/g,"%20");return`![${n}](${A})`}else return s}catch(h){console.warn(h),d++}return s}catch(p){return console.warn(p),s}}}async function is(i,t,e,a,s){if(s==="")return{fileName:"",needWrite:!1};let n=!1,r="",o=0;for(;r===""&&o<Qr;){let p;i instanceof $e.CapacitorAdapter||i instanceof $e.FileSystemAdapter?p=wt(e,`${a}-${qi(10)}.${s}`,i,t):p=`${e}/${a}-${qi(10)}.${s}`,await i.exists((0,$e.normalizePath)(p),!1)||(r=p,n=!0),o++}return{fileName:r,needWrite:n}}async function as(i){var e;let t=await(0,$e.requestUrl)({url:i.href,method:"get"});return{fileContent:t.arrayBuffer,fileExtension:(e=Ba(t.headers["content-type"]||""))!=null?e:""}}var Gi=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/(https:\/\/|http:\/\/)(stackoverflow\.com|serverfault\.com|superuser\.com|askubuntu\.com|stackapps\.com|.*\.stackexchange\.com)\/(q|a|questions)\/(\d+)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s=await(0,Jt.request)({method:"GET",url:e,headers:{...Oe}}),n=new DOMParser().parseFromString(s,"text/html"),r=await this.parseDocument(n),o=this.templateEngine.render(this.plugin.settings.stackExchangeNoteTitle,{title:r.title,date:this.getFormattedDateForFilename(a)}),p;this.plugin.settings.downloadStackExchangeAssetsInDir?(p=this.templateEngine.render(this.plugin.settings.assetsDir,{date:"",fileName:"",contentType:""}),p=`${p}/${G(o)}`):p=this.templateEngine.render(this.plugin.settings.assetsDir,{date:this.getFormattedDateForFilename(a),fileName:G(o),contentType:this.plugin.settings.stackExchangeContentType});let c=this.templateEngine.render(this.plugin.settings.stackExchangeNote,this.getNoteData(r,a));return this.plugin.settings.downloadStackExchangeAssets&&Jt.Platform.isDesktop&&(c=await Pe(this.plugin,G(o),c,p)),new O(o,"md",c,this.plugin.settings.stackExchangeContentType,a)}getNoteData(e,a){let s=e.topAnswer?this.templateEngine.render(this.plugin.settings.stackExchangeAnswer,{date:this.getFormattedDateForContent(a),answerContent:e.topAnswer.content,authorName:e.topAnswer.author.name,authorProfileURL:e.topAnswer.author.profile}):"",n="";for(let r=0;r<e.answers.length;r++)n=n.concat(`

***

`,this.templateEngine.render(this.plugin.settings.stackExchangeAnswer,{date:this.getFormattedDateForContent(a),answerContent:e.answers[r].content,authorName:e.answers[r].author.name,authorProfileURL:e.answers[r].author.profile}));return{date:this.getFormattedDateForContent(a),questionTitle:e.title,questionURL:e.url,questionContent:e.content,authorName:e.author.name,authorProfileURL:e.author.profile,topAnswer:s,answers:n.trim(),extra:{question:e}}}async parseDocument(e){var r,o,p,c,d,h,C,A,x,T,N,j,U,z,y,q;let a;try{a=new URL((p=(r=e.querySelector('link[rel="canonical"]'))==null?void 0:r.getAttribute("href"))!=null?p:(o=e.querySelector('meta[property="og:url"]'))==null?void 0:o.getAttribute("content"))}catch(S){a=null}let s=e.querySelector('#question [itemprop="author"]'),n=[];for(let S of e.querySelectorAll(".answer")){let L=S.querySelector('[itemprop="author"]');n.push({content:await He(Wi.sanitize((c=S.querySelector('[itemprop="text"]'))!=null?c:"")),author:{name:(h=(d=L==null?void 0:L.querySelector('[itemprop="name"]'))==null?void 0:d.textContent)!=null?h:"",profile:L instanceof Element&&a instanceof URL?String.prototype.concat(a.origin,(A=(C=L.querySelector("a"))==null?void 0:C.getAttribute("href"))!=null?A:""):""}})}return{title:(T=(x=e.querySelector('#question-header [itemprop="name"]'))==null?void 0:x.textContent)!=null?T:"",content:await He(Wi.sanitize((N=e.querySelector('#question [itemprop="text"]'))!=null?N:"")),url:(j=a==null?void 0:a.href)!=null?j:"",topAnswer:n.slice(0,1).shift(),answers:n.slice(1),author:{name:(z=(U=s==null?void 0:s.querySelector('[itemprop="name"]'))==null?void 0:U.textContent)!=null?z:"",profile:s instanceof Element&&a instanceof URL?String.prototype.concat(a.origin,(q=(y=s.querySelector("a"))==null?void 0:y.getAttribute("href"))!=null?q:""):""}}}},hn=Gi;var Qe=require("obsidian"),Zt=jt(Tn()),wn=jt($i());var Ki=class extends H{test(t){return this.isValidUrl(t)}async prepareNote(t){let e=new URL(t),a=await this.getDocument(e);return this.makeNote(a,e)}async makeNote(t,e){(0,Zt.isProbablyReaderable)(t)||new Qe.Notice("@mozilla/readability considers this document to unlikely be readerable.");let a=new Date,s=this.extractPreviewUrl(t),n=new Zt.Readability(t).parse();if(n===null||!Object.prototype.hasOwnProperty.call(n,"content"))return this.notParsableArticle(e.href,s,a);let r=await He(n.content);return this.parsableArticle({date:this.getFormattedDateForContent(a),articleTitle:n.title||"No title",articleURL:e.href,articleReadingTime:this.getEstimatedReadingTime(n),articleContent:r,siteName:n.siteName||"",author:n.byline||"",previewURL:s||"",publishedTime:n.publishedTime!==null?this.getFormattedDateForContent(n.publishedTime):"",readabilityArticle:n},a)}async getDocument(t){var o,p,c,d,h,C,A;let e=await this.parseHtmlDom(t),a=e.getElementsByTagName("base"),s=null;a.length>0&&(s=a.item(0).getAttribute("href"),Array.from(a).forEach(x=>{x.remove()}));let n=e.createElement("base");n.setAttribute("href",Ua(s!=null?s:t.href,t.origin)),e.head.append(n);let r=wn.sanitize(e.body.innerHTML);return e.body.innerHTML=r,(o=e.body.querySelectorAll("pre br"))==null||o.forEach(x=>{x.outerHTML="<br-keep></br-keep>"}),(p=e.body.querySelectorAll("h1, h2, h3, h4, h5, h6"))==null||p.forEach(x=>{x.className=""}),(c=e.body.querySelectorAll("[class*=highlight-text],[class*=highlight-source]"))==null||c.forEach(x=>{var N;let T=(N=x.className.match(/highlight-(?:text|source)-([a-z0-9]+)/))==null?void 0:N[1];x.firstElementChild.nodeName=="PRE"&&(x.removeAttribute("data-snippet-clipboard-copy-content"),x.firstElementChild.id=`code-lang-${T}`)}),(d=e.body.querySelectorAll("[class*=language-]"))==null||d.forEach(x=>{var N;let T=(N=x.className.match(/language-([a-z0-9]+)/))==null?void 0:N[1];x.id=`code-lang-${T}`}),(h=e.body.querySelectorAll(".codehilite > pre"))==null||h.forEach(x=>{x.firstChild.nodeName!=="CODE"&&!x.className.includes("language")&&(x.id="code-lang-text")}),(C=e.body.querySelectorAll(".captioned-image-container figure"))==null||C.forEach(x=>{let T=x.querySelector("img");T&&(x.querySelector(".image-link").remove(),x.prepend(T))}),(A=e.body.querySelectorAll("div > figure"))==null||A.forEach(x=>{let T=x;x.parentElement.before(T)}),e}async parsableArticle(t,e){let a=this.templateEngine.render(this.plugin.settings.parseableArticleNoteTitle,{title:t.articleTitle,date:this.getFormattedDateForFilename(e)}),s=this.templateEngine.render(this.plugin.settings.parsableArticleNote,t);return this.plugin.settings.downloadImages&&Qe.Platform.isDesktop&&(s=await Pe(this.plugin,G(a),s,this.getAssetsDir(a,e))),new O(a,"md",s,this.plugin.settings.parseableArticleContentType,e)}async notParsableArticle(t,e,a){console.error("Website not parseable");let s=this.templateEngine.render(this.plugin.settings.notParsableArticleNote,{articleURL:t,previewURL:e}),n=this.templateEngine.render(this.plugin.settings.notParseableArticleNoteTitle,{date:this.getFormattedDateForFilename(a)});return this.plugin.settings.downloadImages&&Qe.Platform.isDesktop&&(s=await Pe(this.plugin,G(n),s,this.getAssetsDir(n,a))),new O(n,"md",s,this.plugin.settings.notParseableArticleContentType,a)}extractPreviewUrl(t){let e=t.querySelector('meta[property="og:image"]');return e==null&&(e=t.querySelector('meta[name="twitter:image"]')),e==null?void 0:e.getAttribute("content")}getAssetsDir(t,e){return this.plugin.settings.downloadImagesInArticleDir?`${this.templateEngine.render(this.plugin.settings.assetsDir,{date:"",fileName:"",contentType:""})}/${G(t)}`:this.templateEngine.render(this.plugin.settings.assetsDir,{date:this.getFormattedDateForFilename(e),fileName:G(t),contentType:this.plugin.settings.parseableArticleContentType})}getEstimatedReadingTime(t){let e=this.getReadingSpeed(t.lang||"en"),a=t.textContent.trim().split(/\s+/).length;return Math.ceil(a/e)}getReadingSpeed(t){let e=new Map([["en",228],["ar",138],["de",179],["es",218],["fi",161],["fr",195],["he",187],["it",188],["ja",193],["nl",202],["pl",166],["pt",181],["ru",184],["sk",190],["sl",180],["sv",199],["tr",166],["zh",158]]);return e.get(t)||e.get("en")}async parseHtmlDom(t,e=null){var h,C;let a=await(0,Qe.requestUrl)({method:"GET",url:t.href,headers:{...Oe}}),s=e!=null?e:this.getCharsetFromResponseHeader(a),n=a.arrayBuffer,o=new TextDecoder(s).decode(n),c=new DOMParser().parseFromString(o,"text/html"),d=c.querySelector('meta[charset], meta[http-equiv="Content-Type"]');if(d){let A=d.getAttribute("charset")||((C=(h=d.getAttribute("content"))==null?void 0:h.match(/charset=([^;]+)/i))==null?void 0:C[1]);if(A&&A!==s)return this.parseHtmlDom(t,A)}return c}getCharsetFromResponseHeader(t){var n;let e=(n=t.headers)==null?void 0:n["content-type"],a="UTF-8",s=e==null?void 0:e.match(/charset=([^;]+)/i);return s&&(a=s[1]),a}},mt=Ki;var Ji=class extends H{test(){return!0}async prepareNote(t){let e=new Date,a=this.templateEngine.render(this.plugin.settings.textSnippetNoteTitle,{date:this.getFormattedDateForFilename(e)}),s=this.templateEngine.render(this.plugin.settings.textSnippetNote,{content:t,date:this.getFormattedDateForContent(e)});return new O(a,"md",s,this.plugin.settings.textSnippetContentType,e)}},Nn=Ji;var dt=require("obsidian");var Zi={INSTANCE:"/api/v2/instance",OEMBED:"/api/oembed",STATUS:"/api/v1/statuses",CONTEXT:"/api/v1/statuses/%id%/context"},Qi=class extends H{async test(t){return Fe(t)&&await this.testIsMastodon(t)}async prepareNote(t){let e=new Date,a=new URL(t),s=a.pathname.split("/")[2],n=await this.loadStatus(a.hostname,s),r=[];this.plugin.settings.saveMastodonReplies&&(r=await this.loadReplies(a.hostname,s));let o=this.templateEngine.render(this.plugin.settings.mastodonNoteTitle,{tootAuthorName:n.account.display_name,date:this.getFormattedDateForFilename(e)}),p;this.plugin.settings.downloadMastodonMediaAttachmentsInDir?(p=this.templateEngine.render(this.plugin.settings.assetsDir,{date:"",fileName:"",contentType:""}),p=`${p}/${G(o)}`):p=this.templateEngine.render(this.plugin.settings.assetsDir,{date:this.getFormattedDateForFilename(e),fileName:G(o),contentType:this.plugin.settings.mastodonContentTypeSlug});let c=await this.getNoteData(n,r,p,G(o),e),d=this.templateEngine.render(this.plugin.settings.mastodonNote,c);return new O(o,"md",d,this.plugin.settings.mastodonContentTypeSlug,e)}async getNoteData(t,e,a,s,n){let r=await this.parseStatus(t,a,s);if(e.length>0)for(let o=0;o<e.length;o++){let p=await this.parseStatus(e[o],a,s),c=this.templateEngine.render(this.plugin.settings.mastodonReply,{tootAuthorName:e[o].account.display_name,tootURL:e[o].url,tootContent:p});r=r.concat(`

***

`,c)}return{date:this.getFormattedDateForContent(n),tootAuthorName:t.account.display_name,tootURL:t.url,tootContent:r,extra:{status:t,replies:e}}}async loadStatus(t,e){return JSON.parse(await(0,dt.request)({method:"GET",contentType:"application/json",url:`https://${t}${Zi.STATUS}/${e}`}))}async loadReplies(t,e){let a=String.prototype.concat.call("https://",t,String.prototype.replace.call(Zi.CONTEXT,"%id%",e));return JSON.parse(await(0,dt.request)({method:"GET",contentType:"application/json",url:a})).descendants}async parseStatus(t,e,a){let s=await He(t.content),n=this.plugin.settings.downloadMastodonMediaAttachments&&dt.Platform.isDesktop?await Pe(this.plugin,e,this.prepareMedia(t.media_attachments),a):this.prepareMedia(t.media_attachments);return s.concat(n)}prepareMedia(t){return t.reduce((e,{url:a,description:s})=>{let n=s?`
> *${s}*`:"";return`${e}

![](${a})${n}`},"")}async testIsMastodon(t){if(!t)return!1;let e=new URL(t).hostname;try{let a=JSON.parse(await(0,dt.request)({method:"GET",contentType:"application/json",url:`https://${e}${Zi.INSTANCE}`}));return(a==null?void 0:a.domain)===e}catch(a){return!1}}},En=Qi;var An=require("obsidian");var ea=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/(tiktok.com)\/(\S+)\/(video)\/(\d+)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s=await this.parseHtml(e,a),n=this.templateEngine.render(this.plugin.settings.tikTokNote,s),r=this.templateEngine.render(this.plugin.settings.tikTokNoteTitle,{authorName:s.authorName,date:this.getFormattedDateForFilename(a)});return new O(r,"md",n,this.plugin.settings.tikTokContentTypeSlug,a)}async parseHtml(e,a){var o,p,c,d;let s=await(0,An.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"}}),n=new DOMParser().parseFromString(s,"text/html"),r=this.PATTERN.exec(e);return{date:this.getFormattedDateForContent(a),videoId:r[4],videoURL:(p=(o=n.querySelector('meta[property="og:url"]'))==null?void 0:o.getAttribute("content"))!=null?p:e,videoDescription:(d=(c=n.querySelector('meta[property="og:description"]'))==null?void 0:c.getAttribute("content"))!=null?d:"",videoPlayer:`<iframe width="${this.plugin.settings.tikTokEmbedWidth}" height="${this.plugin.settings.tikTokEmbedHeight}" src="https://www.tiktok.com/embed/v2/${r[4]}"></iframe>`,authorName:r[2],authorURL:`https://www.tiktok.com/${r[2]}`}}},Sn=ea;var Et=class{constructor(t){_(this,"parsers");this.parsers=t}async createParser(t){for(let e of this.parsers)if(await e.test(t))return e}};var At=class extends mt{constructor(){super(...arguments);_(this,"PATTERN",/^https?:\/\/(?:www\.)?github\.com\/([a-zA-Z0-9_-]+)\/([a-zA-Z0-9_-]+)\/?/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new URL(e),s=await this.getDocument(a),n=s.querySelector("article.markdown-body");return n.querySelectorAll('[aria-label^="Permalink:"]').forEach(r=>r.remove()),s.querySelector("body").innerHTML=n.outerHTML,this.makeNote(s,a)}};var St=class extends mt{constructor(){super(...arguments);_(this,"PATTERN",/^(?:https?:\/\/)?(?:[a-z]{2,3}(?:-[a-z]{2,3})?)(?:\.m)?\.wikipedia\.org\/wiki\/([^\/]+)/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new URL(e),s=await this.getDocument(a);return s.querySelectorAll(".reference .cite-bracket").forEach(n=>{n.remove()}),s.querySelectorAll(".reference a").forEach(n=>{n.textContent="\xA0"+n.textContent}),s.querySelectorAll(".mw-cite-backlink").forEach(n=>{n.remove()}),s.querySelectorAll(".infobox caption").forEach(n=>{let r=s.createElement("p");r.innerHTML=n.innerHTML,n.parentElement.insertBefore(r,n),n.remove()}),s.querySelectorAll(".wikitable caption").forEach(n=>{let r=s.createElement("p");r.innerHTML=n.innerHTML,n.parentElement.insertBefore(r,n),n.remove()}),this.makeNote(s,a)}};function _n(i){return i<1e3?String(i):i<1e6?`${kn(Number(i/1e3),1)}K`:i<1e9?`${kn(Number(i/1e6),1)}M`:String(i)}function kn(i,t){return i.toFixed(t).replace(/\.0+$/,"")}var ut=["string","number","bigint","symbol"],ls=/{{(.*?)}}/g,kt=class{constructor(){_(this,"modifiers");this.modifiers={blockquote:t=>this.validateFilterValueType(t,"blockquote",ut)?t.split(`
`).map(e=>`> ${e}`).join(`
`):t,capitalize:t=>{if(!this.validateFilterValueType(t,"capitalize",ut))return t;let e=String(t);return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},join:(t,e=",")=>this.validateFilterValueType(t,"join",["array"])?t.join(e):t,numberLexify:t=>_n(t),lower:t=>{if(!this.validateFilterValueType(t,"lower",ut))return t;String(t).toLowerCase()},map:(t,e)=>{if(!this.validateFilterValueType(t,"map",["array"]))return t;try{return t.map(e)}catch(a){return console.warn("Error in map modifier:",a),t}},replace:(t,e,a="")=>this.validateFilterValueType(t,"replace",ut)?t.replaceAll(e,a):t,striptags:(t,e="")=>{if(!this.validateFilterValueType(t,"striptags",ut))return t;let a=new RegExp(`<(?!/?(${e.replace(/[<>]/g,"").split(",").join("|")})s*/?)[^>]+>`,"gi");return t.replace(a,"")},upper:t=>{if(!this.validateFilterValueType(t,"upper",ut))return t;String(t).toUpperCase()}}}render(t,e){try{let a=this.processLoops(t,e);return a=this.processVariables(a,e),a=this.processSimplePattern(a,e),a}catch(a){return console.error("Error rendering template:",a),t}}processSimplePattern(t,e){let a=/%(\w+(?:\.\w+)*)%/g;return t.replace(a,(s,n)=>{try{let r=this.resolveValue(n,e);return r===void 0?(console.warn(`Unable to resolve ${n}`),s):String(r)}catch(r){return console.warn(`Error processing simple pattern "${s}":`,r),s}})}processVariables(t,e){return t.replace(ls,(a,s)=>{try{let[n,...r]=s.split("|").map(h=>h.trim()),p=/(['"])((?:[^\\]|\\.)*?)\1/.exec(n),c;if(p!==null?c=p[2]:c=this.resolveValue(n,e),c===void 0)return console.warn(`Unable to resolve ${n}`),a;let d=c;for(let h of r)d=this.applyModifier(d,h);return String(d)}catch(n){return console.warn(`Error processing variable "${a}":`,n),a}})}processLoops(t,e){let a=/{%\s*for\s+(\w+)\s+in\s+(\w+(?:\.\w+)*)\s*%}([\s\S]*?){%\s*endfor\s*%}/g;return t.replace(a,(s,n,r,o)=>{try{let p=this.resolveValue(r,e);return Array.isArray(p)?p.map(c=>{let d={...e,[n]:c};return this.render(o,d)}).join(""):(console.warn(`Value at "${r}" is not an array`),"")}catch(p){return console.warn(`Error processing loop "${s}":`,p),""}})}resolveValue(t,e){let a=t.trim().split("."),s=e;for(let n of a){if(s==null)return;s=s[n]}return s}addModifier(t,e){if(typeof e!="function")throw new Error("Modifier must be a function");this.modifiers[t]=e}parseModifier(t){let e=t.match(/(\w+)(?:\((.*?)\))?/);if(!e)return{name:t,args:[]};let[,a,s]=e,n=s?this.parseArguments(s):[];return{name:a,args:n}}parseArguments(t){let e=[],a="",s=!1,n="",r=!1,o=0,p=!1,c=()=>{(a.trim()||s)&&e.push(this.evaluateArgument(a.trim())),a=""};for(let d=0;d<t.length;d++){let h=t[d];if(p){a+=h,p=!1;continue}switch(h){case"\\":p=!0;break;case'"':case"'":r||(s&&h===n?s=!1:s||(s=!0,n=h)),a+=h;break;case"(":o++,a+=h;break;case")":o--,a+=h;break;case"=":t[d+1]===">"?(r=!0,a+="=>",d++):a+=h;break;case",":!s&&!r&&o===0?c():a+=h;break;default:a+=h}}return(a||s)&&c(),e}evaluateArgument(t){try{if(t.includes("=>")){let e=Function(`return ${t}`)();return typeof e=="function"?e:t}if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(t==="")return"";if(!isNaN(Number(t)))return Number(t);if(t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch(e){return t}return t}catch(e){return console.warn("Error evaluating argument:",t,e),t}}applyModifier(t,e){try{let{name:a,args:s}=this.parseModifier(e);return this.modifiers[a]?this.modifiers[a](t,...s):(console.warn(`Modifier "${a}" not found`),t)}catch(a){return console.warn(`Error applying modifier "${e}":`,a),t}}validateFilterValueType(t,e,a){let s=typeof t;return a.includes(s)?!0:a.includes("array")?Array.isArray(t):(console.warn(`Filter ${e} supports following types ${a.join(", ")}, but ${s} was provided.`),!1)}};var ta=require("obsidian");var _t=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/^(https?:\/\/(?:(?:www|m)\.)?youtube\.com\/(?:channel\/(UC[\w-]{22})|c\/([^\s\/]+)|@([\w-]+)))(?:\/.*)?$/u)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s=this.plugin.settings.youtubeApiKey===""?await this.parseSchema(e,a):await this.parseApiResponse(e,a),n=this.templateEngine.render(this.plugin.settings.youtubeChannelNote,s),r=this.templateEngine.render(this.plugin.settings.youtubeChannelNoteTitle,{title:s.channelTitle,date:this.getFormattedDateForFilename(a)});return new O(r,"md",n,this.plugin.settings.youtubeChannelContentTypeSlug,a)}async parseSchema(e,a){var s,n,r,o,p,c,d,h,C,A,x,T,N,j,U,z,y,q,S,L,Y,Q,te,V,de,be,F,M,$,ue,E,W,P,re,ye,xe,Re,fe,Te,we,ge,ke,_e,X,se;try{let Ce=await(0,ta.request)({method:"GET",url:e,headers:{...Oe}}),[,J]=this.PATTERN.exec(e),B=new DOMParser().parseFromString(Ce,"text/html"),Ne=Wt("ytInitialData",B.querySelectorAll("script")),R=typeof Ne!="undefined"?JSON.parse(Ne.value):{},Ue=(A=(C=(h=(d=(c=(p=(o=(r=(n=(s=R==null?void 0:R.header)==null?void 0:s.pageHeaderRenderer)==null?void 0:n.content)==null?void 0:r.pageHeaderViewModel)==null?void 0:o.metadata)==null?void 0:p.contentMetadataViewModel)==null?void 0:c.metadataRows)==null?void 0:d[1])==null?void 0:h.metadataParts)==null?void 0:C[0])==null?void 0:A.text.content;Ue===null&&console.warn("Unable to parse subscribers count.");let ze=(L=(S=(q=(y=(z=(U=(j=(N=(T=(x=R==null?void 0:R.header)==null?void 0:x.pageHeaderRenderer)==null?void 0:T.content)==null?void 0:N.pageHeaderViewModel)==null?void 0:j.metadata)==null?void 0:U.contentMetadataViewModel)==null?void 0:z.metadataRows)==null?void 0:y[1])==null?void 0:q.metadataParts)==null?void 0:S[1])==null?void 0:L.text.content;return ze===null&&console.warn("Unable to parse subscribers count."),{date:this.getFormattedDateForContent(a),channelId:(te=(Q=(Y=R==null?void 0:R.metadata)==null?void 0:Y.channelMetadataRenderer)==null?void 0:Q.externalId)!=null?te:"",channelTitle:(be=(de=(V=R==null?void 0:R.metadata)==null?void 0:V.channelMetadataRenderer)==null?void 0:de.title)!=null?be:"",channelDescription:($=(M=(F=R==null?void 0:R.metadata)==null?void 0:F.channelMetadataRenderer)==null?void 0:M.description)!=null?$:"",channelURL:J,channelAvatar:(ye=(re=(P=(W=(E=(ue=R==null?void 0:R.metadata)==null?void 0:ue.channelMetadataRenderer)==null?void 0:E.avatar)==null?void 0:W.thumbnails)==null?void 0:P[0])==null?void 0:re.url)!=null?ye:"",channelBanner:(se=(X=(_e=(ke=(ge=(we=(Te=(fe=(Re=(xe=R==null?void 0:R.header)==null?void 0:xe.pageHeaderRenderer)==null?void 0:Re.content)==null?void 0:fe.pageHeaderViewModel)==null?void 0:Te.banner)==null?void 0:we.imageBannerViewModel)==null?void 0:ge.image)==null?void 0:ke.sources)==null?void 0:_e[0])==null?void 0:X.url)!=null?se:"",channelSubscribersCount:this.parseNumberValue(Ue!=null?Ue:""),channelVideosCount:this.parseNumberValue(ze!=null?ze:""),channelVideosURL:`${J}/videos`,channelShortsURL:`${J}/shorts`}}catch(Ce){Me(Ce,"Unable to parse Youtube channel schema from DOM.")}}async parseApiResponse(e,a){var c,d,h,C,A;let s=new URL("https://youtube.googleapis.com/youtube/v3/channels?part=snippet,contentDetails,statistics,brandingSettings"),[,n,r,o,p]=this.PATTERN.exec(e);if(r)s.searchParams.append("id",r);else if(p)s.searchParams.append("forHandle",p);else if(o){let x=await this.parseSchema(e,a);s.searchParams.append("id",x.channelId)}else throw new Error("Unable to compose Youtube API URL");s.searchParams.append("key",this.plugin.settings.youtubeApiKey);try{let x=await(0,ta.request)({method:"GET",url:s.toString(),headers:{Accept:"application/json"}}),T=JSON.parse(x);if(T.items.length===0)throw new Error(`Channel (${e}) cannot be fetched from API`);let N=T.items[0];return{date:this.getFormattedDateForContent(a),channelId:N.id,channelTitle:N.snippet.title,channelDescription:N.snippet.description,channelURL:n,channelAvatar:(d=(c=N.snippet.thumbnails)==null?void 0:c.high.url)!=null?d:N.snippet.thumbnails.default.url,channelBanner:(A=(C=(h=N.brandingSettings)==null?void 0:h.image)==null?void 0:C.bannerExternalUrl)!=null?A:"",channelSubscribersCount:N.statistics.subscriberCount,channelVideosCount:N.statistics.videoCount,channelVideosURL:`${n}/videos`,channelShortsURL:`${n}/shorts`}}catch(x){Me(x,"Unable to parse Youtube channel API response.")}}parseNumberValue(e){let a=/(\d+(?:\.\d+)?)(K|M|B)?/,s=e.match(a);if(!s)return 0;let[,n,r]=s;if(typeof r=="undefined")return Number(n);switch(r){case"K":return Number(n)*1e3;case"M":return Number(n)*1e6;case"B":return Number(n)*1e9}}};var me=require("obsidian");var gt=class extends Error{constructor(t){super(t),this.name="FileNotFoundError"}};var qe=class extends Error{constructor(t){super(t),this.name="FileExistsError"}};var Ct=class{constructor(t,e){_(this,"plugin");_(this,"templateEngine");this.plugin=t,this.templateEngine=e}async saveNote(t){let e;if(this.plugin.app.vault.adapter instanceof me.CapacitorAdapter||this.plugin.app.vault.adapter instanceof me.FileSystemAdapter?e=wt("/",t.getFullFilename(),this.plugin.app.vault.adapter,this.plugin.getFileSystemLimits()):e=(0,me.normalizePath)(`/${t.getFullFilename()}`),this.plugin.settings.inboxDir){let a=this.templateEngine.render(this.plugin.settings.inboxDir,{date:Nt(t.createdAt,this.plugin.settings.dateTitleFmt),fileName:t.fileName,contentType:t.contentType});await this.createDirectory(a),this.plugin.app.vault.adapter instanceof me.CapacitorAdapter||this.plugin.app.vault.adapter instanceof me.FileSystemAdapter?e=wt(a,t.getFullFilename(),this.plugin.app.vault.adapter,this.plugin.getFileSystemLimits()):e=(0,me.normalizePath)(`${a}/${t.getFullFilename()}`)}if(t.filePath=e,await this.exists(t.filePath))throw new qe(`${t.getFullFilename()} already exists!`);{let a=await this.plugin.app.vault.create(t.filePath,t.content);(this.plugin.settings.openNewNote||this.plugin.settings.openNewNoteInNewTab)&&this.plugin.app.workspace.getLeaf(this.plugin.settings.openNewNoteInNewTab?"tab":!1).openFile(a),new me.Notice(`${t.getFullFilename()} created successfully`)}}async createDirectory(t){let e=(0,me.normalizePath)(t),a=this.plugin.app.vault.getAbstractFileByPath(e);a&&a instanceof me.TFolder||await this.plugin.app.vault.createFolder(e)}async exists(t){return await this.plugin.app.vault.adapter.exists(t)}getFileByPath(t){let e=this.plugin.app.vault.getFileByPath(t);if(e===null)throw new gt(`File not found: ${t}`);return e}async appendToExistingNote(t){let e;try{e=this.getFileByPath(t.filePath)}catch(a){if(a instanceof gt)new me.Notice(`Unable to edit ${t.getFullFilename()}`);else throw a}await this.plugin.app.vault.process(e,a=>`${a}

${t.content}`)}};var Rt=require("obsidian");var Dt=require("obsidian");var Pt=class extends Dt.Modal{constructor(t,e,a){super(t),this.setTitle("Duplicate notes detected");let s=e.map(r=>`<li>${r.fileName}</li>`).join("");this.setContent($t(`<ul>${s}</ul>`));let n=!1;new Dt.Setting(this.contentEl).setName("Do not ask again").addToggle(r=>{r.setValue(!1).onChange(()=>n=!0)}),new Dt.Setting(this.contentEl).addButton(r=>r.setButtonText("Append to existing").setCta().onClick(()=>{this.close(),a("appendToExisting",n)})).addButton(r=>r.setButtonText("Nothing").onClick(()=>{this.close(),a("nothing",n)}))}};var Qt=class{constructor(t,e,a){this.parserCreator=t;this.plugin=e;this.repository=a}async createNote(t){let e=await this.makeNote(t);try{await this.repository.saveNote(e)}catch(a){a instanceof qe&&this.handleFileExistsError([e])}}async createNotesFromBatch(t){let e=gn(t,this.plugin.settings.batchProcessDelimiter),a=[];for(let s of e.everyLineIsURL?e.urls:[t]){let n=await this.makeNote(s);try{await this.repository.saveNote(n)}catch(r){r instanceof qe&&a.push(n)}}a.length>0&&this.handleFileExistsError(a)}async insertContentAtEditorCursorPosition(t,e){let a=await this.makeNote(t);e.replaceRange(a.content,e.getCursor())}async makeNote(t){return await(await this.parserCreator.createParser(t)).prepareNote(t)}openNote(t){if(this.plugin.settings.openNewNote||this.plugin.settings.openNewNoteInNewTab)try{let e=this.repository.getFileByPath(t.filePath);this.plugin.app.workspace.getLeaf(this.plugin.settings.openNewNoteInNewTab?"tab":!1).openFile(e)}catch(e){console.error(e),new Rt.Notice(`Unable to open ${t.getFullFilename()}`)}}async handleFileExistsError(t){switch(this.plugin.settings.fileExistsStrategy){case"ask":new Pt(this.plugin.app,t,(e,a)=>{this.handleFileAskModalResponse(e,a,t)}).open();break;case"nothing":this.handleFileExistsStrategyNothing(t);break;case"appendToExisting":this.handleFileExistsStrategyAppend(t);break}}async handleFileAskModalResponse(t,e,a){switch(t){case"nothing":this.handleFileExistsStrategyNothing(a);break;case"appendToExisting":this.handleFileExistsStrategyAppend(a);break}e&&this.plugin.saveSetting("fileExistsStrategy",t),a.length===1&&this.openNote(a.shift())}async handleFileExistsStrategyAppend(t){for(let e of t)try{await this.repository.appendToExistingNote(e),new Rt.Notice(`${e.getFullFilename()} was updated.`)}catch(a){console.error(a),new Rt.Notice(`${e.getFullFilename()} was not updated!`,0)}}handleFileExistsStrategyNothing(t){for(let e of t)new Rt.Notice(`${e.getFullFilename()} already exists.`)}};var ei=class{constructor(t){this.noteService=t}async processContent(t){this.noteService.createNote(t)}async processContentBatch(t){this.noteService.createNotesFromBatch(t)}async insertContentAtEditorCursorPosition(t,e){this.noteService.insertContentAtEditorCursorPosition(t,e)}};var We=require("obsidian");var ti=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/^https:\/\/bsky\.app\/profile\/(?<handle>[a-zA-Z0-9-.:]+)\/post\/(?<postId>[a-zA-Z0-9]+)/);_(this,"AT_URI_PATTERN",/^at:\/\/(?<handle>(?:did:plc:[a-zA-Z0-9]+|[a-zA-Z0-9.-]+(?:\.[a-zA-Z0-9.-]+)*?))\/(?<collection>[a-zA-Z.]+)\/(?<rkey>[a-zA-Z0-9]+)$/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s=await this.loadPost(e),n=this.formatPostContent(s,a,this.plugin.settings.blueskyNote);this.plugin.settings.saveBlueskyPostReplies&&s.replies.forEach(o=>{n=n.concat(`

***

`,this.formatPostContent(o,a,this.plugin.settings.blueskyPostReply))});let r=this.templateEngine.render(this.plugin.settings.blueskyNoteTitle,{date:this.getFormattedDateForFilename(a),authorHandle:s.author.handle,authorName:s.author.displayName});if(this.plugin.settings.downloadBlueskyEmbeds){let o;this.plugin.settings.downloadBlueskyEmbedsInDir?(o=this.templateEngine.render(this.plugin.settings.assetsDir,{date:"",fileName:"",contentType:""}),o=`${o}/${G(r)}`):o=this.templateEngine.render(this.plugin.settings.assetsDir,{date:this.getFormattedDateForFilename(a),fileName:G(r),contentType:this.plugin.settings.mastodonContentTypeSlug}),n=await Pe(this.plugin,G(r),n,o)}return new O(r,"md",n,this.plugin.settings.blueskyContentTypeSlug,a)}async loadPost(e){var a,s,n;try{let r=this.getPostUri(this.getPostIdFromUrl(e)),o=JSON.parse(await(0,We.request)({method:"GET",contentType:"application/json",url:`https://public.api.bsky.app/xrpc/app.bsky.feed.getPostThread?uri=${r}`})),p=[];return o.thread.replies.forEach(c=>{var h,C,A;let d=this.getPostUrl(this.getPostIdFromAtUri(c.post.uri));p.push({url:d,content:c.post.record.text,author:{...c.post.author},embeds:Object.prototype.hasOwnProperty.call(c.post,"embed")?this.makeEmbeds(c.post.embed,d):[],likeCount:c.post.likeCount,replyCount:c.post.replyCount,repostCount:c.post.repostCount,quoteCount:c.post.replyCount,publishedAt:(0,We.moment)(c.post.record.createdAt).toDate(),facets:(A=(C=(h=c.post.record)==null?void 0:h.facets)==null?void 0:C.map(x=>this.makeFacet(x)))!=null?A:[]})}),{url:e,content:o.thread.post.record.text,author:{...o.thread.post.author},embeds:Object.prototype.hasOwnProperty.call(o.thread.post,"embed")?this.makeEmbeds(o.thread.post.embed,e):[],likeCount:o.thread.post.likeCount,replyCount:o.thread.post.replyCount,repostCount:o.thread.post.repostCount,quoteCount:o.thread.post.replyCount,publishedAt:(0,We.moment)(o.thread.post.record.createdAt).toDate(),facets:(n=(s=(a=o.thread.post.record)==null?void 0:a.facets)==null?void 0:s.map(c=>this.makeFacet(c)))!=null?n:[],replies:p}}catch(r){Me(r,"Unable to parse Bluesky API response.")}}makeEmbeds(e,a){var r,o,p;let s=[];switch(e.$type){case"app.bsky.embed.images#view":e.images.forEach(c=>{s.push({type:"image",url:c.fullsize,thumbnail:c.thumb,title:"",description:c.alt})});break;case"app.bsky.embed.video#view":s.push({type:"video",url:a,thumbnail:e.thumbnail,title:"",description:""});break;case"app.bsky.embed.external#view":s.push({type:"external",url:e.external.uri,thumbnail:e.external.thumb,title:((r=e.external)==null?void 0:r.title)||"",description:e.external.description||""});break;case"app.bsky.embed.record#view":s.push({type:"record",url:this.getPostUrl(this.getPostIdFromAtUri(e.record.uri)),thumbnail:"",title:`Post from ${((o=e.record.author)==null?void 0:o.displayName)||e.record.author.handle}`,description:e.record.value.text});break;case"app.bsky.embed.record#viewRecord":s.push({type:"record",url:this.getPostUrl(this.getPostIdFromAtUri(e.uri)),thumbnail:"",title:`Post from ${((p=e.author)==null?void 0:p.displayName)||e.author.handle}`,description:e.value.text});break;case"app.bsky.embed.recordWithMedia#view":if(Object.prototype.hasOwnProperty.call(e,"media")){let c=this.makeEmbeds(e.media,a);c&&s.push(...c)}if(Object.prototype.hasOwnProperty.call(e,"record")){let c=this.makeEmbeds(e.record.record,a);c&&s.push(...c)}break}return s}makeFacet(e){var a,s,n,r;switch((a=e.features)==null?void 0:a[0].$type){case"app.bsky.richtext.facet#mention":return{type:"mention",did:(s=e.features)==null?void 0:s[0].did,byteStart:e.index.byteStart,byteEnd:e.index.byteEnd};case"app.bsky.richtext.facet#link":return{type:"link",uri:(n=e.features)==null?void 0:n[0].uri,byteStart:e.index.byteStart,byteEnd:e.index.byteEnd};case"app.bsky.richtext.facet#tag":return{type:"tag",tag:(r=e.features)==null?void 0:r[0].tag,byteStart:e.index.byteStart,byteEnd:e.index.byteEnd}}throw new Error(`Unrecognized facet type ${e}`)}formatPostContent(e,a,s){let n="";e.embeds.forEach(o=>{let p;switch(o.type){case"video":p=`[Watch video on Bluesky](${o.url})`;break;case"external":case"record":o.url.startsWith("https://media.tenor.com")?p=`![${o.title}](${o.url})`:o.thumbnail?p=`![${o.title}](${o.thumbnail})
${o.description}
${o.url}`:p=`[${o.title}](${o.url})
${o.description}`;break;default:p=`![](${o.thumbnail})`}n=n.concat(p,`

`)});let r=this.replaceFacets(e)+`

`+n;return this.renderPost(s,{date:this.getFormattedDateForContent(a),content:r.trim(),postURL:e.url,authorHandle:e.author.handle,authorName:e.author.displayName||e.author.handle,likeCount:e.likeCount,replyCount:e.replyCount,repostCount:e.repostCount,quoteCount:e.quoteCount,publishedAt:this.getFormattedDateForContent(e.publishedAt),extra:{post:e}})}replaceFacets(e){if(e.facets.length===0)return e.content;let a=new TextEncoder,s=new TextDecoder,n=a.encode(e.content),r=[...e.facets].sort((c,d)=>c.byteStart-d.byteStart),o="",p=0;for(let c of r){o+=s.decode(n.slice(p,c.byteStart));let d=s.decode(n.slice(c.byteStart,c.byteEnd));switch(c.type){case"mention":o+=`[${d}](https://bsky.app/profile/${c.did})`;break;case"link":o+=`[${d}](${c.uri})`;break;case"tag":o+=`[${d}](https://bsky.app/search?q=${encodeURIComponent(c.tag)})`;break}p=c.byteEnd}return p<n.length&&(o+=s.decode(n.slice(p))),o}renderPost(e,a){return this.templateEngine.render(e,a)}getPostUrl(e){return`https://bsky.app/profile/${e.handle}/post/${e.id}`}getPostUri(e){return`at://${e.handle}/app.bsky.feed.post/${e.id}`}getPostIdFromUrl(e){let a=e.match(this.PATTERN);if(!a){let s=`Unable to determine handle and id from provided url ${e}`;throw new We.Notice(s),new Error(s)}return{handle:a.groups.handle,id:a.groups.postId}}getPostIdFromAtUri(e){let a=e.match(this.AT_URI_PATTERN);if(!a){let s=`Unable to determine handle and id from provided AT uri ${e}`;throw new We.Notice(s),new Error(s)}return{handle:a.groups.handle,id:a.groups.rkey}}};var Cn=require("obsidian");var ii=class extends H{constructor(){super(...arguments);_(this,"PATTERN",/^https?:\/\/(?:[a-z]{2}\.|www\.)?pinterest\.(?:com|ca|co\.uk|fr|de|es|it)\/pin\/(\d+)\/?/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let a=new Date,s;try{s=await this.parseHtml(e)}catch(o){Me(o,"Unable to parse Pinterest note data.")}let n=this.templateEngine.render(this.plugin.settings.pinterestNoteTitle,{date:this.getFormattedDateForFilename(a),authorName:s.author.fullName||s.author.username}),r=this.renderContent({date:this.getFormattedDateForContent(a),pinId:s.id,pinURL:s.url,title:s.title,link:s.link,image:s.image,description:s.description,likeCount:s.likeCount,authorName:s.author.fullName||s.author.username,authorProfileURL:s.author.profileURL});if(this.plugin.settings.downloadPinterestImage){let o=this.templateEngine.render(this.plugin.settings.assetsDir,{date:this.getFormattedDateForFilename(a),fileName:G(n),contentType:this.plugin.settings.pinterestContentTypeSlug});r=await Pe(this.plugin,G(n),r,o)}return new O(n,"md",r,this.plugin.settings.pinterestContentTypeSlug,a)}renderContent(e){return this.templateEngine.render(this.plugin.settings.pinterestNote,e)}async parseHtml(e){var c,d,h,C,A,x,T,N,j,U,z,y,q,S,L,Y,Q,te,V,de,be,F,M,$,ue,E;let a=await(0,Cn.request)({method:"GET",url:e,headers:{...Oe}}),s=new DOMParser().parseFromString(a,"text/html"),n=s.querySelectorAll("[data-relay-response='true']"),r;n.forEach(W=>{var re;let P=JSON.parse(W.textContent);((re=P==null?void 0:P.variables)==null?void 0:re.isDesktop)===!0&&(r=P)}),r===void 0&&(r=(c=JSON.parse(n==null?void 0:n[0].textContent))!=null?c:{});let o=(C=(h=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:h.v3GetPinQuery)==null?void 0:C.data;if(o===void 0)throw new Error("pinJsonData is undefined");let p=(x=(A=o==null?void 0:o.originPinner)!=null?A:o==null?void 0:o.pinner)!=null?x:{};return{id:e.match(this.PATTERN)[1],url:e,title:(j=(N=o==null?void 0:o.title)!=null?N:(T=s.querySelector("h1"))==null?void 0:T.textContent)!=null?j:"",description:(y=(z=o==null?void 0:o.descriotion)!=null?z:(U=s.querySelector("[data-test-id='truncated-description'] div div"))==null?void 0:U.textContent)!=null?y:"",link:(Y=(S=o==null?void 0:o.link)!=null?S:(q=s.querySelector("meta[property='pinterestapp:source']"))==null?void 0:q.getAttribute("content"))!=null?Y:(L=s.querySelector("meta[property='og:see_also']"))==null?void 0:L.getAttribute("content"),image:(de=(V=(Q=o==null?void 0:o.imageSpec_orig)==null?void 0:Q.url)!=null?V:(te=s.querySelector("[data-test-id='pin-closeup-image'] img"))==null?void 0:te.getAttribute("src"))!=null?de:"",author:{fullName:(be=p==null?void 0:p.fullName)!=null?be:"",username:(F=p==null?void 0:p.username)!=null?F:"",profileURL:`https://www.pinterest.com/${(M=p==null?void 0:p.username)!=null?M:""}`},likeCount:(E=(ue=($=o==null?void 0:o.reactionCountsData)==null?void 0:$.find(W=>(W==null?void 0:W.reactionType)===1))==null?void 0:ue.reactionCount)!=null?E:0}}};var ai=class extends ht.Plugin{constructor(){super(...arguments);_(this,"api");_(this,"settings");_(this,"fileSystemLimits");_(this,"noteService");_(this,"parserCreator");_(this,"templateEngine");_(this,"vaultRepository")}getFileSystemLimits(){return this.fileSystemLimits}getVaultRepository(){return this.vaultRepository}async onload(){await this.loadSettings(),this.fileSystemLimits=Va(ht.Platform,this.settings),this.templateEngine=new kt,this.parserCreator=new Et([new qa(this.app,this,this.templateEngine),new _t(this.app,this,this.templateEngine),new Ga(this.app,this,this.templateEngine),new Xa(this.app,this,this.templateEngine),new dn(this.app,this,this.templateEngine),new hn(this.app,this,this.templateEngine),new Sn(this.app,this,this.templateEngine),new At(this.app,this,this.templateEngine),new St(this.app,this,this.templateEngine),new ti(this.app,this,this.templateEngine),new ii(this.app,this,this.templateEngine),new En(this.app,this,this.templateEngine),new mt(this.app,this,this.templateEngine),new Nn(this.app,this,this.templateEngine)]),this.vaultRepository=new Ct(this,this.templateEngine),this.noteService=new Qt(this.parserCreator,this,this.vaultRepository),this.api=new ei(this.noteService),(0,ht.addIcon)("read-it-later",ps),this.addRibbonIcon("read-it-later","ReadItLater: Create from clipboard",async()=>{await this.api.processContent(await this.getTextClipboardContent())}),this.addCommand({id:"save-clipboard-to-notice",name:"Create from clipboard",callback:async()=>{await this.api.processContent(await this.getTextClipboardContent())}}),this.addCommand({id:"create-from-clipboard-batch",name:"Create from batch in clipboard",callback:async()=>{await this.api.processContentBatch(await this.getTextClipboardContent())}}),this.addCommand({id:"insert-at-cursor",name:"Insert at the cursor position",editorCallback:async e=>{await this.api.insertContentAtEditorCursorPosition(await this.getTextClipboardContent(),e)}}),this.addSettingTab(new qt(this.app,this)),this.settings.extendShareMenu&&this.registerEvent(this.app.workspace.on("receive-text-menu",(e,a)=>{e.addItem(s=>{s.setTitle("ReadItLater"),s.setIcon("read-it-later"),s.onClick(()=>this.api.processContent(a))})})),this.registerEvent(this.app.workspace.on("url-menu",(e,a)=>{Fe(a,[pt,ct])&&e.addItem(s=>{s.setTitle("ReadItLater"),s.setIcon("read-it-later"),s.onClick(()=>this.api.processContent(a))})}))}async loadSettings(){this.settings=Object.assign({},m,await this.loadData())}async saveSetting(e,a){this.settings[e]=a,await this.saveSettings()}async saveSettings(){await this.saveData(this.settings)}async getTextClipboardContent(){return await navigator.clipboard.readText()}},ps=`
<svg fill="currentColor" stroke="currentColor" version="1.1" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
	<g>
		<path d="m365.9,144.9c-12.3,0-24.2,1.8-35.4,5.2v-114.7h-96.9l7.3-35.4h-150.2l6.8,35.4h-97.5v454.6h330.5v-102.1c11.2,3.4 23.1,5.2 35.4,5.2 68.8-0.1 124.1-56.4 124.1-124.1 0-67.8-55.3-124.1-124.1-124.1zm-150.1-124l-10.4,50h-79.2l-9.4-50h99zm93.8,448.2h-288.7v-412.8h80.7l6.8,35.4h113.6l7.3-35.4h80.3v102.2c-27.3,14-48.8,37.9-59.7,66.7h-200.9v20.8h195c-1.4,7.4-2.2,15.1-2.2,22.9 0,13.4 2.2,26.4 6.2,38.6h-199v20.9h208.1c12,21.8 30.3,39.7 52.5,51.1v89.6zm56.3-98c-57.3,0-103.2-46.9-103.2-103.2s46.9-103.2 103.2-103.2c57.3,0 103.2,46.9 103.2,103.2s-45.8,103.2-103.2,103.2z"/>
		<polygon points="426.4,223.1 346.1,303.4 313.8,271.1 299.2,285.7 346.1,332.6 441,237.7   "/>
		<rect width="233.5" x="49" y="143.9" height="20.9"/>
		<rect width="233.5" x="49" y="388.9" height="20.9"/>
	</g>
</svg>`;
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 2.5.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.6/LICENSE *)
*/

/* nosourcemap */