æ¥æº ï¼šhttps://es6.ruanyifeng.com/
  
## æ‰©å±•è¿ç®—ç¬¦

### å«ä¹‰

æ‰©å±•è¿ç®—ç¬¦ï¼ˆspreadï¼‰æ˜¯ä¸‰ä¸ªç‚¹ï¼ˆ`...`ï¼‰ï¼Œ**å°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—**

```javascript

console.log(...[1, 2, 3])

```

### æ›¿ä»£applyæ–¹æ³•

es5ä¸­å°†æ•°ç»„è½¬åŒ–ä¸ºå‚æ•°åºåˆ—çš„å†™æ³•

```js

// ES5 çš„å†™æ³•

function f(x, y, z) {

Â  // ...

}

var args = [0, 1, 2];

f.apply(null, args);

```

**æ±‚æ•°ç»„æœ€å¤§å€¼**

```js

//es5

Math.max.apply(null,[4,8,19]);

//es6

Math.max(...[4,8,19]);

```

### åº”ç”¨

**(1)å¤åˆ¶åˆå¹¶æ•°ç»„**

éƒ½æ˜¯æµ…æ‹·è´

**(2)ä»»ä½•å®žçŽ°IteratoræŽ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦è½¬åŒ–æˆæ•°ç»„**

[... xxx ] æ¯”å¦‚Map,Set,Generator

**(3)å­—ç¬¦ä¸²**

å°†å­—ç¬¦ä¸²è½¬åŒ–æˆæ•°ç»„ï¼Œèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å­—ç¬¦ä¸²çš„é•¿åº¦

```js

console.log('x\uD83D\uDE80y'); //xðŸš€y

console.log([...'x\uD83D\uDE80y'].length); //3

```

## Â Array.from()

å°†ç±»æ•°ç»„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œ iterable å¯¹è±¡ï¼ˆå®žçŽ°iteratoræŽ¥å£ï¼‰è½¬åŒ–æˆæ•°ç»„å¯¹è±¡

```js

let arrayLike = {

Â  Â  '0': 'a',

Â  Â  '1': 'b',

Â  Â  '2': 'c',

Â  Â  length: 3

};

// ES5çš„å†™æ³•

var arr1 = [].slice.call(arrayLike); // ['a', 'b', 'c']

// ES6çš„å†™æ³•

let arr2 = Array.from(arrayLike); // ['a', 'b', 'c']

```

å®žé™…åº”ç”¨ä¸­ï¼Œå¸¸è§çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ˜¯ DOM æ“ä½œè¿”å›žçš„ NodeList é›†åˆï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„`arguments`å¯¹è±¡ã€‚`Array.from`éƒ½å¯ä»¥å°†å®ƒä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ Â 

```js

document.querySelectorAll('div') Â //NodeListé›†åˆ

```

ä¸Šé¢è¯´åˆ°ï¼Œæ‹“å±•è¿ç®—ç¬¦ä¹Ÿå¯ä»¥å°†æŸäº›æ•°æ®ç»“æž„è½¬åŒ–æˆæ•°ç»„ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?æ‰©å±•è¿ç®—ç¬¦èƒŒåŽè°ƒç”¨çš„æ˜¯éåŽ†å™¨æŽ¥å£ï¼ˆ`Symbol.iterator`ï¼‰ï¼Œå¦‚æžœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæŽ¥å£ï¼Œå°±æ— æ³•è½¬æ¢ã€‚`Array.from`æ–¹æ³•è¿˜æ”¯æŒç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚æ‰€è°“ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæœ¬è´¨ç‰¹å¾åªæœ‰ä¸€ç‚¹ï¼Œå³å¿…é¡»æœ‰`length`å±žæ€§ã€‚å› æ­¤ï¼Œä»»ä½•æœ‰`length`å±žæ€§çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥é€šè¿‡`Array.from`æ–¹æ³•è½¬ä¸ºæ•°ç»„ï¼Œè€Œæ­¤æ—¶æ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•è½¬æ¢ã€‚

```javascript

[...{length: 3}]; //Uncaught TypeError: {(intermediate value)} is not iterable

Â  Â  Array.from({ length: 3 });

// [ undefined, undefined, undefined ]

```

å¯¹äºŽè¿˜æ²¡æœ‰éƒ¨ç½²è¯¥æ–¹æ³•çš„æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨`Array.prototype.slice`æ–¹æ³•æ›¿ä»£ã€‚

```javascript

const toArray = (() =>

Â  Array.from ? Array.from : obj => [].slice.call(obj)

)();

```

`Array.from`è¿˜å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºŽæ•°ç»„çš„`map`æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åŽçš„å€¼æ”¾å…¥è¿”å›žçš„æ•°ç»„ã€‚

```javascript

Array.from(arrayLike, x => x * x);

// ç­‰åŒäºŽ

Array.from(arrayLike).map(x => x * x);

```

## Â å¦‚æžœ`map`å‡½æ•°é‡Œé¢ç”¨åˆ°äº†`this`å…³é”®å­—ï¼Œè¿˜å¯ä»¥ä¼ å…¥`Array.from`çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®š`this`ã€‚ ???

æ­£ç¡®è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦

```javascript

function countSymbols(string) {

Â  return Array.from(string).length;

}

```

## æ•°ç»„çš„find()å’ŒfindIndex()

æ•°ç»„å®žä¾‹çš„`find`æ–¹æ³•ï¼Œç”¨äºŽæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›žè°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›žå€¼ä¸º`true`çš„æˆå‘˜ï¼Œç„¶åŽè¿”å›žè¯¥æˆå‘˜ã€‚å¦‚æžœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›ž`undefined`ã€‚

`find`æ–¹æ³•çš„å›žè°ƒå‡½æ•°å¯ä»¥æŽ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºå½“å‰çš„å€¼ã€å½“å‰çš„ä½ç½®å’ŒåŽŸæ•°ç»„ã€‚

```javascript

[1, 5, 10, 15].find(function(value, index, arr) {

Â  return value > 9;

}) // 10

```

findIndex()è¿”å›žçš„æ˜¯ç´¢å¼• Â è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå‚æ•° Â ç”¨æ¥ç»‘å®šå›žè°ƒå‡½æ•°çš„thiså¯¹è±¡

```javascript

function f(v){

Â  return v > this.age;

}

let person = {name: 'John', age: 20};

[10, 12, 26, 15].find(f, person); Â  Â // 26

```

## æ•°ç»„å®žä¾‹çš„ entries()ï¼Œkeys() å’Œ values()

```js

let a = {name: '123'};

let b = {0: '456'};

console.log(a['name']);

console.log(b[0]); //å­—å…¸ç»“æž„çš„å‡è±¡

```

for ... of éåŽ† Â  æˆ–è€…next()æ–¹æ³•éåŽ† Â 

next()æ–¹æ³•doneå±žæ€§ä¸ºtrue ... false

## æ•°ç»„å®žä¾‹çš„ includes()

includes(value,startIndex) ç¬¬äºŒä¸ªå‚æ•°å¯é€‰

å’Œä¹‹å‰çš„indexOfç›¸æ¯” Â ç›´æŽ¥å¾—åˆ°boolå€¼ï¼Œä¸éœ€è¦ç”¨ >-1 åˆ¤æ–­ Â NaN ä¹Ÿå¯ä»¥è¯†åˆ« Â 

```js

[NaN].includes(Nan); //true

```

## æ•°ç»„å®žä¾‹çš„ flat()ï¼ŒflatMap()

æ•°ç»„çš„æˆå‘˜æœ‰æ—¶è¿˜æ˜¯æ•°ç»„ï¼Œ`Array.prototype.flat()`ç”¨äºŽå°†åµŒå¥—çš„æ•°ç»„â€œæ‹‰å¹³â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŽŸæ•°æ®æ²¡æœ‰å½±å“ã€‚ Â 

`flat()`é»˜è®¤åªä¼šâ€œæ‹‰å¹³â€ä¸€å±‚ï¼Œå¦‚æžœæƒ³è¦â€œæ‹‰å¹³â€å¤šå±‚çš„åµŒå¥—æ•°ç»„ï¼Œå¯ä»¥å°†`flat()`æ–¹æ³•çš„å‚æ•°å†™æˆä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæƒ³è¦æ‹‰å¹³çš„å±‚æ•°ï¼Œé»˜è®¤ä¸º1ã€‚ Â 

å¦‚æžœä¸ç®¡æœ‰å¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½è¦è½¬æˆä¸€ç»´æ•°ç»„ï¼Œå¯ä»¥ç”¨`Infinity`å…³é”®å­—ä½œä¸ºå‚æ•°ã€‚ Â 

å¦‚æžœåŽŸæ•°ç»„æœ‰ç©ºä½ï¼Œ`flat()`æ–¹æ³•ä¼šè·³è¿‡ç©ºä½,ä¸ä¿ç•™ç©ºä½

`flatMap()`æ–¹æ³•å¯¹åŽŸæ•°ç»„çš„æ¯ä¸ªæˆå‘˜æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆç›¸å½“äºŽæ‰§è¡Œ`Array.prototype.map()`ï¼‰ï¼Œç„¶åŽå¯¹è¿”å›žå€¼ç»„æˆçš„æ•°ç»„æ‰§è¡Œ`flat()`æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸æ”¹å˜åŽŸæ•°ç»„ã€‚

```javascript

// ç›¸å½“äºŽ [[2, 4], [3, 6], [4, 8]].flat()

[2, 3, 4].flatMap((x) => [x, x * 2])

// [2, 4, 3, 6, 4, 8]

```